
(function(n){n.StartTime=new Date;n.canAccessWindow=function(n){var t=!0;try{n.location.href}catch(i){t=!1}return t};n._findApplicationWindow=function(t){for(var i=null,r,u;t&&i==null;)if(n.canAccessWindow(t))t.Tridion&&(i=t.Tridion.getApplicationWindow()),r=t.parent,u=r!=t,t=u?r:null;else break;return i};n.getApplicationWindow=function(){var t=null,i=window.parent,r=i!=window;return r&&(t=n._findApplicationWindow(window.parent)),t||(t=window),t}})(window.Tridion||(window.Tridion={}));
Tridion.Type={};Tridion.Type.registerNamespace=function(text){var namespace=null,arr=text.split("."),length=arr.length,base,part,i,l;if(length>0){for(base=window,i=0,l=arr.length;i<l;i++)base[part=arr[i]]||(i==0?eval(part+"={};"):base[part]={}),base=base[part];namespace=base}return namespace};Tridion.Type.resolveNamespace=function(n,t){var u,i,r,f;for(t=t||window,u=n.split("."),i=t,r=0,f=u.length;r<f&&i;r++)i=i[u[r]];return i};Tridion.Type.isArray=function(n){return n&&(n.isArray||this.isNumber(n.length)&&!this.isWindow(n)&&!this.isElement(n)&&this.isObject(n)&&!this.isString(n))?!0:!1};Array.prototype.isArray=!0;Tridion.Type.isDate=function(n){return this.isObject(n)&&n.isDate};Date.prototype.isDate=!0;Tridion.Type.isBoolean=function(n){return typeof n=="boolean"};Tridion.Type.isFunction=function(n){return n&&n.isFunction==!0||!1};Function.prototype.isFunction=!0;Tridion.Type.isNumber=function(n){return typeof n=="number"&&isFinite(n)};Tridion.Type.isNumeric=function(n){return n!=null&&!isNaN(n)};Tridion.Type.isObject=function(n){var t=!1;return n&&(n.window==n?t=!0:typeof n=="object"?n.constructor?n.constructor!=String&&n.constructor!=Number&&(t=!0):t=!0:this.isFunction(n)&&(t=!0)),t};Tridion.Type.isString=function(n){return typeof n=="string"||n!=null&&n instanceof String};Tridion.Type.isNode=function(n){return!n||n.nodeType===null?!1:!0};Tridion.Type.isHtmlElement=function(n){return this.isElement(n)&&n.style!=null};Tridion.Type.isWindow=function(n){return this.isObject(n)&&n.window==n};Tridion.Type.isElement=function(n){return this.isNode(n)&&n.nodeType==1};Tridion.Type.isDocument=function(n){return this.isNode(n)&&n.nodeType==9};Tridion.Type.isNullOrUndefined=function(n){return n===null||n===undefined};Tridion.Type.toNumber=function(n){return Number(this.toNumberString(n))};Tridion.Type.toNumberString=function(n){return isNaN(Number(n))&&this.isString(n)?n.replace(/[\u3002\uff0e\uff0d\uff61\uff10-\uff19]/g,function(n){var t=n.charCodeAt(0);switch(t){case 12290:case 65294:case 65377:return".";case 65293:return"-";default:return t-65296}}):n};Tridion.Type.equals=function(n,t){var i=!1;return n===t?i=!0:typeof n=="object"&&typeof t=="object"&&(i=n===null||t===null?!1:Tridion.Type.isArray(n)&&Tridion.Type.isArray(t)?Tridion.Utils.Array.areEqual(n,t):Tridion.Type.isDate(n)&&Tridion.Type.isDate(t)?Tridion.Utils.Date.equals(n,t):Tridion.Web.UI.Core.Utils.Object.equals(n,t)),i};
Tridion.Type.registerNamespace("Tridion.Core.Configuration");Tridion.Core.Configuration.Version="8.5.0.22656";Tridion.Core.Configuration.Modification="8";Tridion.Core.Configuration.DebugMode=!1;Tridion.Core.Configuration.CorePath="/WebUI/Core/";Tridion.Core.Configuration.Editors={Base:{theme:"/WebUI/Editors/Base/Themes/Carbon2/",vdir:"/WebUI/Editors/Base/"},"Compatibility.7_1.Core":{theme:"/WebUI/Editors/Compatibility.7_1.Core/",vdir:"/WebUI/Editors/Compatibility.7_1.Core/"},SDLTools:{theme:"/WebUI/Editors/SDLTools/Theme/",vdir:"/WebUI/Editors/SDLTools/"},CME:{theme:"/WebUI/Editors/CME/Themes/Carbon2/",vdir:"/WebUI/Editors/CME/"},XPMCore:{theme:"/WebUI/Editors/XPMCore/Themes/Carbon2/",vdir:"/WebUI/Editors/XPMCore/"},"Compatibility.7_1.CME":{theme:"/WebUI/Editors/Compatibility.7_1.CME/",vdir:"/WebUI/Editors/Compatibility.7_1.CME/"},SiteEdit:{theme:"/WebUI/Editors/SiteEdit/Themes/Carbon2/",vdir:"/WebUI/Editors/SiteEdit/"},"Compatibility.7_1.XPM":{theme:"/WebUI/Editors/Compatibility.7_1.XPM/",vdir:"/WebUI/Editors/Compatibility.7_1.XPM/"},DevicePreview:{theme:"/WebUI/Editors/DevicePreview/Themes/Carbon2/",vdir:"/WebUI/Editors/DevicePreview/"},Safeguard:{theme:"/WebUI/Editors/Safeguard/Themes/Carbon2/",vdir:"/WebUI/Editors/Safeguard/"},"Tridion.AudienceManagement.UI.Editor":{theme:"/WebUI/Editors/AM/Themes/Carbon2/",vdir:"/WebUI/Editors/AM/"},"Tridion.UGC.Editor":{theme:"/WebUI/Editors/UGC/Themes/Carbon2/",vdir:"/WebUI/Editors/UGC/"},"Tridion.TranslationManager.UI.Editor":{theme:"/WebUI/Editors/TM2010/Themes/Carbon2/",vdir:"/WebUI/Editors/TM2010/"},ExternalContentLibrary:{theme:"/WebUI/Editors/ECL/Themes/Carbon2/",vdir:"/WebUI/Editors/ECL/"},ContextExpressions:{theme:"/WebUI/Editors/ContextExpressions/Themes/Carbon2/",vdir:"/WebUI/Editors/ContextExpressions/"},SmartTarget:{theme:"/WebUI/Editors/SmartTarget/Themes/Carbon/",vdir:"/WebUI/Editors/SmartTarget/"}};
Tridion.Type.registerNamespace("Tridion.Web.UI.Core.Utils");Tridion.Web.UI.Core.Utils.Console=function(){var r="[SDL Web",u="]",i=function(n,i,r){Tridion.Core.Configuration.DebugMode&&t(n,i,r)},t=function(n,t,i){var f,o,e;t=t||n;f=Tridion.Utils.Array.fromArguments(i);o=r+" "+t+u;f.unshift(o);e=window.console;e[n].apply(e,f)},n={};return n.debug=function(n,t,r){i("log","debug",arguments)},n.debugInfo=function(n,t,r){i("info","info (debug)",arguments)},n.debugWarn=function(n,t,r){i("warn","warning (debug)",arguments)},n.error=function(n,i,r){t("error",null,arguments)},n.info=function(n,i,r){t("info",null,arguments)},n.log=function(n,i,r){t("log",null,arguments)},n.warn=function(n,i,r){t("warn","warning",arguments)},n}();
if(Tridion.Type.registerNamespace("Tridion.Utils.Assert"),Tridion.Utils.Assert.isTrue=function(n,t){if(!(n===!0))throw new Error(Tridion.Utils.String.format(t||'The specified value "{0}" should be true.',n+""));},Tridion.Utils.Assert.isFalse=function(n,t){if(!(n===!1))throw new Error(Tridion.Utils.String.format(t||'The specified value "{0}" should be false.',n+""));},Tridion.Utils.Assert.isBoolean=function(n,t){if(!Tridion.Type.isBoolean(n))throw new Error(Tridion.Utils.String.format(t||'The specified value "{0}" should be a boolean.',n+""));},Tridion.Utils.Assert.isDefined=function(n,t){if(n===undefined)throw new Error(t||"The specified value is undefined.");},Tridion.Utils.Assert.isNotNull=function(n,t){if(n===null)throw new Error(t||"The specified value is null.");},Tridion.Utils.Assert.isNotNullOrUndefined=function(n,t){if(n===undefined||n===null)throw new Error(t||"The specified value is null or undefined.");},Tridion.Utils.Assert.areEqual=function(n,t,i){if(!(n===t))throw new Error(Tridion.Utils.String.format(i||'"{0}" is not equal to "{1}".',n+"",t+""));},Tridion.Utils.Assert.areNotEqual=function(n,t,i){if(n===t)throw new Error(Tridion.Utils.String.format(i||'The specified values are equal ("{0}").',n+"",t+""));},Tridion.Utils.Assert.isString=function(n,t){if(!Tridion.Type.isString(n))throw new Error(Tridion.Utils.String.format(t||'The specified value "{0}" is not a string.',n+""));},Tridion.Utils.Assert.isNumber=function(n,t){if(!Tridion.Type.isNumber(n))throw new Error(Tridion.Utils.String.format(t||'The specified value "{0}" is not a number.',n+""));},Tridion.Utils.Assert.isDate=function(n,t){if(!Tridion.Type.isDate(n))throw new Error(Tridion.Utils.String.format(t||'The specified value "{0}" is not a date.',n+""));},Tridion.Utils.Assert.isNumeric=function(n,t){if(!Tridion.Type.isNumeric(n))throw new Error(Tridion.Utils.String.format(t||'The specified value "{0}" is not numeric.',n+""));},Tridion.Utils.Assert.isObject=function(n,t){if(!Tridion.Type.isObject(n))throw new Error(Tridion.Utils.String.format(t||'The specified value "{0}" is not an object.',n+""));},Tridion.Utils.Assert.isArray=function(n,t){if(!Tridion.Type.isArray(n))throw new Error(Tridion.Utils.String.format(t||'The specified value "{0}" is not array.',n+""));},Tridion.Utils.Assert.isFunction=function(n,t){if(!Tridion.Type.isFunction(n))throw new Error(Tridion.Utils.String.format(t||'The specified value "{0}" is not a function.',n+""));},Tridion.Utils.Assert.implementsInterface=function(n,t,i){if(!Tridion.OO.implementsInterface(n,t))throw new Error(Tridion.Utils.String.format(i||'The specified object does not implement "{0}"',t));},Tridion.Utils.Assert.isNode=function(n,t){if(!Tridion.Type.isNode(n))throw new Error(Tridion.Utils.String.format(t||'The specified value "{0}" is not a node.',n+""));},Tridion.Utils.Assert.isElement=function(n,t){if(!Tridion.Type.isElement(n))throw new Error(Tridion.Utils.String.format(t||'The specified value "{0}" is not an element.',n+""));},Tridion.Utils.Assert.isHtmlElement=function(n,t){if(!Tridion.Type.isHtmlElement(n))throw new Error(Tridion.Utils.String.format(t||'The specified value "{0}" is not an HTML element.',n+""));},Tridion.Utils.Assert.isDocument=function(n,t){if(!Tridion.Type.isDocument(n))throw new Error(Tridion.Utils.String.format(t||'The specified value "{0}" is not a document object.',n+""));},Tridion.Utils.Assert.isWindow=function(n,t){if(!Tridion.Type.isWindow(n))throw new Error(Tridion.Utils.String.format(t||'The specified value "{0}" is not a window.',n+""));},Tridion.Core.Configuration.DebugMode!==!0)for(var functionName in Tridion.Utils.Assert)Tridion.Utils.Assert[functionName]=function(){};
Tridion.Type.registerNamespace("Tridion.Utils.Array");Tridion.Utils.Array.fromArguments=function(n,t,i){var r=[],f=t||0,e,u;if(n==null)return r;if(Tridion.Type.isArray(n[f]))r=n[f];else for(e=Tridion.Type.isNumber(i)?i:n.length,u=f;u<e;u++)r.push(n[u]);return r};Tridion.Utils.Array.clone=function(n){var i,t,r;for(Tridion.Utils.Assert.isArray(n),i=[],t=0,r=n.length;t<r;t++)i.push(n[t]);return i};Tridion.Utils.Array.areEqual=function(n,t,i){var r,u,f,o,e;if(Tridion.Utils.Assert.isArray(n),Tridion.Utils.Assert.isArray(t),Tridion.Type.isNullOrUndefined(i)||Tridion.Utils.Assert.isBoolean(i),r=!1,n==t)r=!0;else if(u=n.slice(),f=t.slice(),i||(u=Tridion.Utils.Array.normalize(u),f=Tridion.Utils.Array.normalize(f)),o=u.length,o===f.length)for(r=!0,e=0;e<o;e++)if(u[e]!==f[e]){r=!1;break}return r};Tridion.Utils.Array.indexOf=function(n,t,i){if(Tridion.Utils.Assert.isArray(n),Tridion.Type.isNullOrUndefined(i)||Tridion.Utils.Assert.isFunction(i),Tridion.Type.isFunction(i)){for(var r=0,u=n.length;r<u;r++)if(i(n[r],t))return r;return-1}else return n.indexOf(t)};Tridion.Utils.Array.contains=function(n,t,i){return Tridion.Utils.Assert.isArray(n),Tridion.Type.isNullOrUndefined(i)||Tridion.Utils.Assert.isFunction(i),Tridion.Utils.Array.indexOf(n,t,i)!=-1};Tridion.Utils.Array.distinct=function(n,t){for(var r=[],i=0,u=n.length;i<u;i++)Tridion.Utils.Array.contains(r,n[i],t)||r.push(n[i]);return r};Tridion.Utils.Array.intersect=function(n,t,i){for(var r,u=[],f=0,e=n.length;f<e;f++)r=n[f],Tridion.Utils.Array.contains(t,r,i)&&!Tridion.Utils.Array.contains(u,r,i)&&u.push(r);return u};Tridion.Utils.Array.includes=function(n,t){var r,i;for(Tridion.Utils.Assert.isArray(n),Tridion.Utils.Assert.isArray(t),r=t.length,i=0;i<r;i++)if(n.indexOf(t[i])===-1)return!1;return!0};Tridion.Utils.Array.removeAt=function(n,t){if(Tridion.Utils.Assert.isArray(n),Tridion.Utils.Assert.isNumber(t),!(t<0)){var i=n.length;t<i&&n.splice(t,1)}};Tridion.Utils.Array.move=function(n,t,i){var u,f,r;if((Tridion.Utils.Assert.isArray(n),Tridion.Utils.Assert.isNumber(t),Tridion.Utils.Assert.isNumber(i),!(t<0)&&!(i<0)&&t!=i)&&(u=n.length,!(t>=u)&&!(i>=u))){if(f=n[t],t<i)for(r=t;r<i;r++)n[r]=n[r+1];else for(r=t;r>i;r--)n[r]=n[r-1];n[i]=f}};Tridion.Utils.Array.insert=function(n,t,i){Tridion.Utils.Assert.isArray(n);Tridion.Utils.Assert.isDefined(t);Tridion.Type.isNullOrUndefined(i)||Tridion.Utils.Assert.isNumber(i);var r=n.length;if(r>i)do n[r]=n[r-1],r--;while(r>i);n[r]=t};Tridion.Utils.Array.normalize=function(n){var t,i;for(Tridion.Utils.Assert.isArray(n),t=n.sort(),i=t.length-2;i>=0;i--)t[i]===t[i+1]&&Tridion.Utils.Array.removeAt(t,i);return t};Tridion.Utils.Array.each=function(n,t){var r,i;for(Tridion.Utils.Assert.isArray(n),Tridion.Utils.Assert.isFunction(t),r=n.length,i=0;i<r;i++)t(n[i],i,n)};
Tridion.Type.registerNamespace("Tridion.Utils");Tridion.Utils.Object={};Tridion.Utils.Object.rxpSecureDeserialize=/\(/g;Tridion.Utils.Object.rxpDateDeserialize=/(^|[^\\])\"\\\/Date\\\((-?[0-9]+)(?:[a-zA-Z]|(?:\\+|-)[0-9]{4})?\)\\\/\"/g;Tridion.Utils.Object.serialize=function(n){var e,f,u,t,o,i,r;switch(typeof n){case"object":if(n)if(Tridion.Type.isArray(n)){for(t=[],i=0,e=n.length;i<e;i++)u=n[i],u&&u.isFunction||t.push(Tridion.Utils.Object.serialize(u));return["[",t.join(","),"]"].join("")}else if(n instanceof Date||Tridion.Type.isDate(n))return['"\\/Date(',n.getTime()-n.getTimezoneOffset()*6e4,')\\/"'].join("");else{t=[];for(f in n)u=n[f],u&&u.isFunction||t.push([Tridion.Utils.Object.serialize(f),Tridion.Utils.Object.serialize(n[f])].join(":"));return["{",t.join(","),"}"].join("")}else return"null";break;case"number":return String(n);case"string":if(navigator.userAgent.indexOf(" Safari/")>-1||/[\"\b\f\n\r\t\\\\\x00-\x1F]/i.test(n)){for(t=[],o=n.length,i=0;i<o;++i)if(r=n.charAt(i),r>=" ")(r==="\\"||r==='"')&&t.push("\\"),t.push(r);else switch(r){case"\b":t.push("\\b");break;case"\f":t.push("\\f");break;case"\n":t.push("\\n");break;case"\r":t.push("\\r");break;case"\t":t.push("\\t");break;default:t.push("\\u00");r.charCodeAt()<16&&t.push("0");t.push(r.charCodeAt().toString(16))}return'"'+t.join("")+'"'}else return'"'+n+'"';case"boolean":return n.toString();default:return"null"}};Tridion.Utils.Object.deserialize=function(text){return text.length==0?undefined:(text=text.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"),eval(["(",text.replace(Tridion.Utils.Object.rxpSecureDeserialize,"\\(").replace(Tridion.Utils.Object.rxpDateDeserialize,"$1new Date($2)"),")"].join("")))};Tridion.Utils.Object.clone=function(n){var t,i;Tridion.Utils.Assert.isObject(n);t={};for(i in n)t[i]=n[i];return t};Tridion.Utils.Object.hasProperties=function(n){Tridion.Utils.Assert.isObject(n);for(var t in n)return!0;return!1};Tridion.Utils.Object.getProperties=function(n){var t,i;Tridion.Utils.Assert.isObject(n);t=[];for(i in n)t.push(i);return t};Tridion.Utils.Object.find=function(n,t){Tridion.Utils.Assert.isObject(n);for(var i in n)if(n[i]==t)return i};Tridion.Utils.Object.getUniqueId=function(n){var i=function(){return"obj_"+Tridion.Utils.Object.getNextId()},t;return Tridion.Type.isWindow(n)?(n.Tridion||(n.Tridion={}),n.Tridion.uniqueID||(n.Tridion.uniqueID=i()),t=n.Tridion.uniqueID):Tridion.Type.isDocument(n)?(n.documentUniqueID||(n.documentUniqueID=i()),t=n.documentUniqueID):(n.uniqueID||(n.uniqueID=i()),t=n.uniqueID),Tridion.Core.Configuration.DebugMode&&Tridion.Type.isHtmlElement(n)&&n.setAttribute("data-sdlweb-uniqueId",t),t};Tridion.Utils.Object.getNextId=function(){return Tridion.Utils.Object.$$uniqueID==null&&(Tridion.Utils.Object.$$uniqueID=0),++Tridion.Utils.Object.$$uniqueID};Tridion.Type.registerNamespace("Tridion.Web.UI.Core.Utils.Object");Tridion.Web.UI.Core.Utils.Object.copyProperties=function(n,t){var e=function(n,i,r){i[r]&&Tridion.Web.UI.Core.Utils.Console.debugWarn(Tridion.Utils.String.format('Tridion.Web.UI.Core.Utils.Object.copyProperties: Property "{1}" already exists on "{0}" and is overwritten."',t,r));i[r]=n[r]},r=function(n){var t=Tridion.Type.resolveNamespace(n);return Tridion.Type.isObject(t)===!1&&Tridion.Web.UI.Core.Utils.Console.error(Tridion.Utils.String.format("Tridion.Web.UI.Core.Utils.Object.copyProperties: The specified object ({0}) does not exist.",n)),t},o=function(n){switch(n){case"getCallStack":case"getName":case"initializeBase":case"isFunction":case"registerClass":case"registerEnum":return!1;default:return!0}},i=r(n),u=r(t),s=Tridion.Type.isFunction(i)&&Tridion.Type.isFunction(u);for(var f in i)(!s||o(f))&&e(i,u,f)};Tridion.Web.UI.Core.Utils.Object.getOwnerObjectFromPropertyPath=function(n){var u=/^(.+)\.[A-z_\$]([A-z_\d\$]+)?$/,t=window,i=n.match(u),r;return i&&(r=i[1],t=Tridion.Type.registerNamespace(r)),t};Tridion.Web.UI.Core.Utils.Object.getPropertyNameFromPropertyPath=function(n){var t=null,r=/^(.+\.)?([A-z_\$]([A-z_\d\$]+)?)$/,i=n.match(r);return i&&(t=i[2]),t};Tridion.Web.UI.Core.Utils.Object.hasSameProperties=function(n,t){Tridion.Utils.Assert.isObject(n);Tridion.Utils.Assert.isObject(t);var i=!1,r=Object.getOwnPropertyNames(n),u=Object.getOwnPropertyNames(t);return Tridion.Utils.Array.areEqual(r,u)&&(i=!0),i};Tridion.Web.UI.Core.Utils.Object.equals=function(n,t){var i,u,e,r,f;if(Tridion.Utils.Assert.isObject(n),Tridion.Utils.Assert.isObject(t),i=!1,Tridion.Web.UI.Core.Utils.Object.hasSameProperties(n,t))for(i=!0,u=Object.getOwnPropertyNames(n),e=u.length,r=0;r<e&&i;r++)f=u[r],i=Tridion.Type.equals(n[f],t[f]);return i};
Tridion.Type.registerNamespace("Tridion.Utils");Tridion.Utils.String={};Tridion.Utils.String.format=function(n){function i(n,t,i,r){n=""+n;for(var f=t-n.length,u=new String;u.length<f;)u+=i;return r==2?n+u:u+n}function r(){var n,r;return arguments[1]?n="{":arguments[2]?n="}":t[arguments[3]]==undefined?n="":(n=new String(t[arguments[3]]),arguments[4]!=""&&arguments[5]!=""&&(r=arguments[6]=="+"?2:1,n=i(n,arguments[5],arguments[4]=="#"?"0":" ",r))),n}var t=Tridion.Utils.Array.fromArguments(arguments,1);return this.$rxFormat==null&&(this.$rxFormat=/\{(\{)|(\})\}|\{(\d+)([$#])?(\d+)?([+-])?\}/g),String(n).replace(this.$rxFormat,r)};Tridion.Utils.String.isNullOrEmpty=function(n){return n==null||n==""?!0:!1};Tridion.Utils.String.concat=function(){for(var t=[],n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t.join("")};Tridion.Utils.String.trim=function(n,t){if(n=="")return n;t||(t="\\s");var i=new RegExp("^["+t+"]+|["+t+"]+$","g");return n.replace(i,"")};Tridion.Utils.String.padLeft=function(n,t,i){for(i==undefined&&(i=" ");n.length<t;)n=i+n;return n};Tridion.Utils.String.padRight=function(n,t,i){for(i==undefined&&(i=" ");n.length<t;)n=n+i;return n};Tridion.Utils.String.shrinkTo=function(n,t){return n.length>3+(t||0)&&(n=n.substr(0,t)+"..."),n};
Tridion.Type.registerNamespace("Tridion.Web.UI.Core.Utils");Tridion.Web.UI.Core.Utils.Deprecation=function(){var n={};n.deprecateProperty=function(n,t,i,f){if(Tridion.Utils.Assert.isString(n),Tridion.Utils.Assert.isString(t),Tridion.Type.isNullOrUndefined(i)||Tridion.Utils.Assert.isString(i),Tridion.Utils.Assert.isDefined(f),h(n)){r(n,t,i);var e=function(){return u(n,t,i),f},o={configurable:!1,enumerable:!0,get:e},s=Tridion.Web.UI.Core.Utils.Object.getOwnerObjectFromPropertyPath(n),c=Tridion.Web.UI.Core.Utils.Object.getPropertyNameFromPropertyPath(n);Object.defineProperty(s,c,o)}};n.deprecateTridionInterface=function(n,t,i){Tridion.Utils.Assert.isString(n);Tridion.Utils.Assert.isString(t);Tridion.Utils.Assert.isString(i)&&f(i);r(n,t,i);var e=function(){u(n,t,i);Tridion.OO.enableInterface(this,n);this.addInterface(i,arguments)},o=Tridion.Web.UI.Core.Utils.Object.getOwnerObjectFromPropertyPath(n),s=Tridion.Web.UI.Core.Utils.Object.getPropertyNameFromPropertyPath(n);o[s]=e;Tridion.Web.UI.Core.Utils.Object.copyProperties(i,n)};n.deprecatedFunctionality={};var t={},f=function(n){var t=Tridion.Type.resolveNamespace(n),i=Tridion.Utils.String.format('"{0}" is not defined.',n);Tridion.Utils.Assert.isDefined(t,i)},i=function(n){var t="No alternative will be available.";return n&&(t=Tridion.Utils.String.format('Please use: "{0}".',n)),t},e=function(n,t,r){var f,e,u,s;return n=Tridion.Utils.String.format('"{0}"',n),u=[],u.push(n),f=o(),f&&u.push(f),e=Tridion.Utils.String.format("{0} is deprecated since version {1}.",u.join(" "),t),u=[],u.push(e),s=i(r),u.push(s),u.join(" ")},o=function(){var n="";try{n=Tridion.Utils.String.format('(used in "{0}")',arguments.callee.caller.caller.caller.caller.name)}catch(t){}return n},r=function(t,r,u){n.deprecatedFunctionality[r]===undefined&&(n.deprecatedFunctionality[r]={});n.deprecatedFunctionality[t]===undefined&&(n.deprecatedFunctionality[t]={"deprecated since version":r,"new syntax":i(u),"where used":{}},n.deprecatedFunctionality[r][t]=n.deprecatedFunctionality[t])},s=function(n){t[n]?t[n]++:(t[n]=1,Tridion.Web.UI.Core.Utils.Console.debugWarn(n))},h=function(n){var t=!1,u=Tridion.Type.resolveNamespace(n),i,r;return u!==undefined&&(t=!0,n.indexOf(".")===-1&&(i=document.getElementById(n),i&&(t=!1)),t&&(r=Tridion.Utils.String.format('Deprecated "{0}" exists and will not be overwritten.',n),Tridion.Web.UI.Core.Utils.Console.debugInfo(r))),!t},u=function(t,i,r){var u="unknown (global scope)",f,o;try{u=arguments.callee.caller.caller.name}catch(h){}f=n.deprecatedFunctionality[t]["where used"];f[u]===undefined&&(f[u]=0);f[u]++;o=e(t,i,r);s(o)};return n}();Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Utils.Assert.raiseError","8.2","throw new Error(string)",function(n){Tridion.Web.UI.Core.Utils.Console.error(n);throw new Error(n);});
Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Web.UI.Core.Utils.Compatibility.createCompatibilityClass","8.2","Tridion.Web.UI.Core.Utils.Deprecation.deprecateTridionInterface",Tridion.Web.UI.Core.Utils.Deprecation.deprecateTridionInterface);Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Web.UI.Core.Utils.Compatibility.createCompatibilityObject","8.2","Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty",function(n,t,i){var r=Tridion.Type.resolveNamespace(i);return Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty(n,t,i,r)});Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Web.UI.Core.Utils.Compatibility.createCompatibilityFunction","8.2","Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty",function(n,t,i){var r=Tridion.Type.resolveNamespace(i);return Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty(n,t,i,r)});Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Web.UI.Core.Utils.Compatibility.copyProperties","8.2","Tridion.Web.UI.Core.Utils.Object.copyProperties",Tridion.Web.UI.Core.Utils.Object.copyProperties);Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Web.UI.Core.Utils.Compatibility.getOwnerObjectFromPropertyPath","8.2","Tridion.Web.UI.Core.Utils.Object.getOwnerObjectFromPropertyPath",Tridion.Web.UI.Core.Utils.Object.getOwnerObjectFromPropertyPath);Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Web.UI.Core.Utils.Compatibility.getPropertyNameFromPropertyPath","8.2","Tridion.Web.UI.Core.Utils.Object.getPropertyNameFromPropertyPath",Tridion.Web.UI.Core.Utils.Object.getPropertyNameFromPropertyPath);
Tridion.Type.registerNamespace("Tridion.Utils.Error");Tridion.Utils.Error.addProperty=function(n,t,i){n.properties==null&&(n.properties={});n.properties[t]=i};Tridion.Utils.Error.toString=function(n){var t=new Array(n.message);for(var i in n.properties)t.push(i+": "+n.properties[i]);return t.join("\n")};
Tridion.Type.registerNamespace("Tridion.Utils");Tridion.Utils.Date={};Tridion.Utils.Date.parse=function(n){var r,t,i;return n instanceof Date?n.getTime():n instanceof Array?n.length==3?(r=new Date(n[2],n[1]-1,n[0]),isNaN(r)?null:r.getTime()):null:(t=new String(n),t.length==0)?null:(i=null,t.match(/(\d{1,2})([\.\-\/])(\d{1,2})\2(\d{4})(?:[T\s](\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?/)?i=new Date(RegExp.$4,RegExp.$3-1,RegExp.$1,RegExp.$5||0,RegExp.$6||0,RegExp.$7||0):t.match(/(\d{4})([\.\-\/])(\d{1,2})\2(\d{1,2})(?:[T\s](\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?/)?i=new Date(RegExp.$1,RegExp.$3-1,RegExp.$4,RegExp.$5||0,RegExp.$6||0,RegExp.$7||0):t.match(t.match(/^-?\d+$/))?i=new Date(parseInt(t)):t.match(/^\w{3}\s\w{2}\s\d{1,2}\s\d{2}:\d{2}:\d{2}\s\w{3}\+\d{4}\s\d{4}$/)&&(i=new Date(t)),i)};Tridion.Utils.Date.equals=function(n,t){return Tridion.Utils.Assert.isDate(n),Tridion.Utils.Assert.isDate(t),n.getTime()===t.getTime()};
Tridion.Type.registerNamespace("Tridion.Utils.Function");Tridion.Utils.Function.$rxGetName=/^[\s\S]*?function[\s\n]*(([\w$]*)[\s\n]*\((.*)\))\W[\s\S]*$/;Tridion.Utils.Function.EMPTY=new Function;Tridion.Utils.Function.getDelegate=function(n,t,i){return function(){return i?t.apply(n,i):arguments.length?t.apply(n,arguments):t.apply(n)}};Tridion.Utils.Function.timedProcessItems=function(n,t,i){var r=n.concat();setTimeout(function(){var u=+new Date;do t(r.shift());while(r.length>0&&+new Date-u<100);r.length>0?setTimeout(arguments.callee,0):i(n)},0)};Tridion.Utils.Function.getCallStack=function(n,t){for(var f=n||arguments.callee.caller,e=new Array,o=new Array,s=0,u,r,i;f!=null&&f.getName;){if(t&&s>=t)break;else if(Tridion.Utils.Array.contains(o,f))break;u=new Array;r=f.arguments;try{for(i=0;i<r.length;i++)Tridion.Type.isFunction(r[i])?u.push("function: "+Tridion.Utils.Function.getName(r[i],!0)):Tridion.Type.isArray(r[i])?u.push("array["+r[i].length+"]"):Tridion.Type.isObject(r[i])?u.push("object{..}"):r[i]===null?u.push("null"):Tridion.Type.isString(r[i])?u.push(r[i].length<200?'"'+r[i]+'"':"[string("+r[i].length+" chars)]"):r[i]===undefined?u.push("undefined"):u.push(r[i])}catch(h){u.push(h.message)}o.push(f);e.unshift(Tridion.Utils.Function.getName(f)+"("+u.join(", ")+")");try{f=f.caller}catch(c){f=null}s++}return e.toString=function(n,t){return t&&Tridion.Utils.Array.each(this,function(n,t){return t+": "+n}),this.join(n||"\n")},e};Tridion.Utils.Function.getName=function(n,t,i){var r=n.toString();return r.replace(Tridion.Utils.Function.$rxGetName,function(){var n=String(arguments[2]?arguments[2]:"anonymous").replace(/\$/,"."),r=arguments[2]?arguments[1]:[n,"(",arguments[3],")"].join("");return!t&&!i?n:t&&!i?r:t&&i?arguments[3]:void 0})};
Tridion.Type.registerNamespace("Tridion.Utils.RegExp");Tridion.Utils.RegExp.escape=function(n){return Tridion.Utils.Assert.isString(n),n.replace(/([\(\)\{\}\[\]\\\^\$\?\.\:\|\+\*])/g,"\\$1")};
Tridion.Type.registerNamespace("Tridion.OO");Tridion.OO.implementsInterface=function(n,t){return Tridion.Utils.Assert.isObject(n),Tridion.Utils.Assert.isString(t),n&&t&&t in(n.interfaces||{})};Tridion.OO.importObject=function(n){var e=(typeof n).toLowerCase(),o,s,r,u;if(e=="number"||e=="string"||e=="boolean")return n;else if(Tridion.OO.implementsInterface(n,"Tridion.MarshallableObject")&&(o=n.getTypeName())){for(var t=o,i=n.interfaces,f=i[t].defaultBase;f&&i[f].upgradedToType;)t=f,f=i[t].defaultBase;if(s=Tridion.Type.resolveNamespace(t),Tridion.Utils.Assert.isFunction(s,t+" should be a constructor."),r=new s,t!=o)for(u=i[t].upgradedToType;u;)r=r.upgradeToType(u),u=i[u].upgradedToType;return r.initializeMarshalledObject(n),r}else return null};Tridion.OO.nonInheritable=function(n){return n.noninheritable=!0,n};Tridion.OO.callBase=Tridion.OO.nonInheritable(function(n,t,i){var r=this;if(r.interfaces[n]==null)throw new Error(Tridion.Utils.String.format("Current object doesn't implement interface '{0}'",n));if(r.interfaces[n][t]==null)throw new Error(Tridion.Utils.String.format("Interface '{0}' doesn't implement method '{1}'",n,t));return r.interfaces[n][t].apply(r,i||[])});Tridion.OO.getCallUpgradedBase=function(n,t){return Tridion.OO.nonInheritable(function(i,r,u){var o=this.interfaces,e=arguments.callee.caller?arguments.callee.caller.implementingInterface:null,f,s,h,c;if(e&&e!=n&&e in o)return o[e].callBase.apply(this,[i,r,u]);else{for(f=i;f&&f!=t;)s=f,f=o[f].upgradedToType;return h=this.callBase,this.callBase=f&&s?Tridion.OO.getCallUpgradedBase(f,s):Tridion.OO.callBase,c=Tridion.OO.callBase.apply(this,[f?t:i,r,u]),this.callBase=h,c}})},function(){Tridion.OO.enableInterface=function(s,h){var c,l;if(!s.interfaces){c=s.prototypeMembers={};for(l in s)c[l]=!0;s.interfaces={type:h};s.properties={delegates:[]}}s.addInterface=n;s.upgradeToType=t;s.getTypeName=i;s.getInterface=r;s.getMainInterface=u;s.getDelegate=f;s.removeDelegate=e;s.callBase=o;s.interfaces[h]=s};var n=Tridion.OO.nonInheritable(function(n,t){var r=this,i=r.interfaces[n],e,h,o,s,f,u;if(i)while(i.upgradedToType)i=r.interfaces[i.upgradedToType];else if(e=Tridion.Type.resolveNamespace(n),e){if(i={},i.interfaces=r.interfaces,i.properties=r.properties,i.prototypeMembers={},h=i.prototypeMembers,o=e.prototype,o)for(s in o)i[s]=o[s],h[s]=!0;e.apply(i,t||[])}else throw Error(Tridion.Utils.String.format('Unable to inherit from "{0}" - constructor is not defined.',n));delete i.prototypeMembers;for(f in i)switch(f){case"interfaces":case"properties":break;case"upgradedToType":break;default:f in r.prototypeMembers||(u=i[f],u&&u.noninheritable||(r[f]=u,u&&!u.implementingInterface&&(u.implementingInterface=n)))}r.defaultBase=n}),t=Tridion.OO.nonInheritable(function(n,t){var f=this,r=f.interfaces,i=r[n],h,u,a,c,l,e,s,o;if(i)Tridion.Utils.Assert.raiseError(Tridion.Utils.String.format('Unable to upgrade "{0}" to "{1}". Interface "{0}" already implements "{1}".',u,n));else if(h=Tridion.Type.resolveNamespace(n),h){if(u=r.type,r.type=n,i=r[n]={interfaces:r,properties:f.properties},a=i.prototypeMembers={},c=h.prototype,c)for(l in c)i[l]=c[l],a[l]=!0;if(h.apply(i,t||[]),i.defaultBase!=u){for(e=r[i.defaultBase].upgradedToType;e&&e!=u;)e=r[e].upgradedToType;e||Tridion.Utils.Assert.raiseError(Tridion.Utils.String.format('Unable to upgrade "{0}" to "{1}". Interface "{0}" or its upgraded interface must be the default interface for "{1}".',u,n));delete f.prototypeMembers;for(s in f)switch(s){case"interfaces":case"properties":break;case"upgradedToType":break;default:o=f[s];o&&(o.noninheritable||s in i||(i[s]=o,o.implementingInterface||(o.implementingInterface=u)))}i.callBase=Tridion.OO.getCallUpgradedBase(n,u)}f.upgradedToType=n}else throw Error('Unable to upgrade to type "'+n+'". Constructor is not defined!');return i}),i=Tridion.OO.nonInheritable(function(){var n=this.interfaces;return n?n.type:undefined}),r=Tridion.OO.nonInheritable(function(n){var t=this;if(n in t.interfaces)return t.interfaces[n];else throw Error("Object does not implement interface "+n+".");}),u=Tridion.OO.nonInheritable(function(){var n=this.interfaces;return n[n.type]}),f=Tridion.OO.nonInheritable(function(n,t){var u=this.properties.delegates,i,f,h,e,o,r,c,s;if(u){for(f=0,h=u.length;f<h;f++)if(i=u[f],i.method==n)if(i.args==t)return i.delegate;else if(e=i.args,e&&t&&e.length==t.length){for(o=!0,r=0,c=t.length;r<c;r++)if(e[r]!==t[r]){o=!1;break}if(o)return i.delegate}return s=this.interfaces,i=Tridion.Utils.Function.getDelegate(s[s.type],n,t),u.push({method:n,args:t,delegate:i}),i}}),e=Tridion.OO.nonInheritable(function(n,t){var u=this.properties.delegates,i,r,e,o,f,s;if(u){for(r=0;r<u.length;r++)if(i=u[r],i.method==n)if(i.args==t)return i=i.delegate,Tridion.Utils.Array.removeAt(u,r),i;else if(e=i.args,e&&t&&e.length==t.length){for(o=!0,f=0,s=t.length;f<s;f++)if(e[f]!==t[f]){o=!1;break}if(o)return i=i.delegate,Tridion.Utils.Array.removeAt(u,r),i}return}}),o=Tridion.OO.callBase}();
Tridion.Type.registerNamespace("Tridion");Tridion.ExtensibleObject=function(){Tridion.OO.enableInterface(this,"Tridion.ExtensibleObject")};Tridion.ExtensibleObject.prototype.addExtension=function(n,t){var i=this.properties.extensions;i||(i=this.properties.extensions={});n in i||(i[n]=[]);i[n].push(t)};Tridion.ExtensibleObject.prototype.callExtension=function(n,t,i,r,u,f,e,o,s,h,c){var a=this.properties.extensions,v,l,y;if(a&&n in a)for(v=a[n],l=0,y=v.length;l<y;l++)try{if(v[l].call(this,t,i,r,u,f,e,o,s,h,c)===!1)return!1}catch(p){alert("Error executing extension '"+n+"': "+p.message)}};
Tridion.Type.registerNamespace("Tridion.Core");Tridion.DisposableObject=function(){Tridion.OO.enableInterface(this,"Tridion.DisposableObject")};Tridion.DisposableObject.prototype.dispose=function(){var n=this.properties;n.disposed||n.disposing||(this.setDisposing(),this._dispose())};Tridion.DisposableObject.prototype._dispose=function(){var r=this.properties,n=this.interfaces,i,u,f,t;if(n)for(t in n)i=n[t],i.disposeInterface&&i.disposeInterface();for(u in r)delete r[u];f={disposed:!0};for(t in n)n[t].properties=f};Tridion.DisposableObject.prototype.getDisposed=function(){return this.properties.disposed};Tridion.DisposableObject.prototype.setDisposing=function(){this.properties.disposing=!0};Tridion.DisposableObject.prototype.getDisposing=function(){return this.properties.disposing};
Tridion.Type.registerNamespace("Tridion");Tridion.ObjectWithEvents=function(){Tridion.OO.enableInterface(this,"Tridion.ObjectWithEvents");this.addInterface("Tridion.DisposableObject");this.properties.handlers={};this.properties.timeouts={}};Tridion.ObjectWithEvents.prototype.addEventListener=function(n,t){var r=this.properties.handlers,i;r&&(i=r[n],i||(i=r[n]=[]),i.push({fnc:t}))};Tridion.ObjectWithEvents.prototype.removeEventListener=function(n,t){var e=this.properties.handlers,i,f,r,u;if(e&&(i=e[n],i))for(f=i.length,r=0;r<f;r++)if(i[r].fnc==t){if(f==1)delete e[n];else{for(u=r+1;u<f;u++)i[u-1]=i[u];i.pop()}return}};Tridion.ObjectWithEvents.prototype.fireGroupedEvent=function(n,t,i){var r=this.properties,u;n in r.timeouts&&clearTimeout(r.timeouts[n]);i>=0?(u=this.getMainInterface(),r.timeouts[n]=setTimeout(function(){delete r.timeouts[n];u.fireEvent(n,t)},i)):(delete r.timeouts[n],this.fireEvent(n,t))};Tridion.ObjectWithEvents.prototype.fireEvent=function(n,t){var r=null,i=null,u;return this.properties.handlers&&(Tridion.Type.isObject(n)&&Tridion.Type.isString(n.type)?(r=n,i=n.type):(t==null&&(t=this.createEventData()),i=n,r=new Tridion.Core.Event(this,i,t)),u=this.processHandlers(r,i,i),u!==!1&&this.properties.handlers&&(u=this.processHandlers(r,i,"*"))),u};Tridion.ObjectWithEvents.prototype.processHandlers=function(n,t,i){var r=this.properties.handlers[i],e,o,u,f;if(r){o=[];do for(e=!1,u=0;r&&u<r.length;u++)if(f=r[u],!Tridion.Utils.Array.contains(o,f)){if(e=!0,o.push(f),f.fnc.call(this,n)===!1)return!1;r=this.properties.handlers?this.properties.handlers[i]:null}while(e)}};Tridion.ObjectWithEvents.prototype.createEventData=function(){return{}};Tridion.ObjectWithEvents.prototype.setDisposing=function(){this.callBase("Tridion.DisposableObject","setDisposing");this.fireEvent("beforedispose");this.fireEvent("dispose")};
Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Type.enableInterface","8","Tridion.OO.enableInterface",Tridion.OO.enableInterface);
Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Type.implementsInterface","8","Tridion.OO.implementsInterface",Tridion.OO.implementsInterface);
Tridion.Type.registerNamespace("Tridion.ValueChangeDetector"),function(){function i(){function e(){u&&!r&&(r=window.setTimeout(s,t))}function o(){!u&&r&&(window.clearTimeout(r),r=null)}function s(){if(r){for(var t in n)h(t);r=null}r=null;e()}function h(t){var r=!1,u;try{n[t].nodeName=="SELECT"&&n[t].multiple?(u=$dom.getSelectedOptions(n[t]),Tridion.Utils.Array.areEqual(u,i[t],!0)||(i[t]=u,r=!0)):n[t].value!=i[t]&&(i[t]=n[t].value,r=!0)}catch(e){delete n[t];delete i[t]}r&&f.fireEvent(new Tridion.Core.Event(f,"change_"+t,{source:n[t]}))}Tridion.OO.enableInterface(this,"Tridion.ValueChangeDetector");this.addInterface("Tridion.ObjectWithEvents");var u=0,n={},i={},r,f=this;this.registerObject=function(t){var r=Tridion.Utils.Dom.getUniqueID(t);return!r||r in n||(n[r]=t,i[r]=t.nodeName=="SELECT"&&t.multiple?$dom.getSelectedOptions(t):t.value,u++,e()),"change_"+r};this.getEventName=function(t){var i=Tridion.Utils.Dom.getUniqueID(t);if(i in n)return"change_"+i};this.unregisterObject=function(t){var r=Tridion.Utils.Dom.getUniqueID(t);if(r in n)return delete n[r],delete i[r],u--,o(),"change_"+r}}var t=200,n;Tridion.ValueChangeDetector.getInstance=function(){return n||(n=new i),n}}();
Tridion.Type.registerNamespace("Tridion");Tridion.EventRegisterClass=function(){var f,s;Tridion.OO.enableInterface(this,"Tridion.EventRegisterClass");this.addInterface("Tridion.DisposableObject");var r=this,t=null,n={},e=!0,o=!1;this.addEventHandler=function(t,r,u,f){Tridion.Utils.Assert.isObject(t);Tridion.Utils.Assert.isString(r);Tridion.Utils.Assert.isFunction(u);Tridion.Type.isNullOrUndefined(f)||Tridion.Utils.Assert.isBoolean(f);n&&!this.getDisposing()&&i(t,r,u,f)};this.removeEventHandler=function(t,i,r,u){Tridion.Utils.Assert.isObject(t);Tridion.Utils.Assert.isString(i);Tridion.Utils.Assert.isFunction(r);Tridion.Type.isNullOrUndefined(u)||Tridion.Utils.Assert.isBoolean(u);n&&!this.getDisposing()&&h(t,i,r,u)};this.removeAllEventHandlers=function(t,i){var c,r,l,f,e,o,s,h;if(Tridion.Type.isNullOrUndefined(t)||Tridion.Utils.Assert.isObject(t),Tridion.Type.isNullOrUndefined(i)||Tridion.Utils.Assert.isString(i),n&&t&&!this.getDisposing()&&(c=Tridion.Utils.Object.getUniqueId(t)||"",r=n[c],r))for(l=r.length,f=0;f<l;f++)if(t==r[f].object){if(e=r[f].listeners,o=!0,e)for(s in e)i&&s!=i?o=!1:(h=e[s],h.hasNullHandler?(o=t!=window,h.handlers.length>0&&(h.handlers=[])):u(t,s,e));o&&(l==1?delete n[c]:Tridion.Utils.Array.removeAt(r,f));return}};this.isLoading=function(){return e};this.isUnloading=function(){return o};this.disposeInterface=Tridion.OO.nonInheritable(function(){var i,f,s;if(n){for(i in n)for(f=n[i],delete n[i];f.length>0;){var o=f.shift(),e=o.listeners,h=o.object;if(e)for(s in e)u(h,s,e)}n=null;t=null;r=null}});f=function(t,r){var e,o,s,u,f,h;if(n){if(e=Tridion.OO.implementsInterface(t,"Tridion.MarshallableObject"),e&&(o=t.getMarshalObject(),o&&(t=o)),s=Tridion.Utils.Object.getUniqueId(t)||"",u=n[s],u){for(f=0;f<u.length;f++)if(t==u[f].object)return u[f]}else r&&(u=n[s]=[]);if(u)return h={object:t,listeners:{}},u.push(h),Tridion.OO.implementsInterface(t,"Tridion.DisposableObject")?(i(t,"dispose",null),e&&i(t,"marshal",null)):Tridion.Type.isWindow(t)&&i(t,"unload",null),h}};s=function(n,t){var i=f(n,t);return i?i.listeners:undefined};this.executeListener=function(i,s,h,c){var a,k,v,w,d,g,nt,b,y,tt,p,l,it;if(r&&!r.getDisposing()){if(a=h.object,a==t)if(k=i[0].data,a=k.source,i=[new Tridion.Core.Event(a,"valuepropertychange",k)],s="valuepropertychange",h=f(a,!1),h&&h.listeners)c=h.listeners.valuepropertychange;else return;if(s=="dispose"&&n&&i[0].source!=a)return;if(s=="unload"&&a==window&&(o=!0),v=c.handlers,v&&v.length){i.length||(i=[window.event]);d=[];nt=!1;do if(w=!1,v)for(b=0;v&&b<v.length;b++)if(y=v[b],d.indexOf(y)<0){if(w=!0,d.push(y),y=y.fnc,tt=y.apply(a,i),g=g||tt,tt===!1){nt=!0;w=!1;break}v=c.handlers}while(w)}switch(s){case"marshal":n&&i[0].source==h.object&&(p=Tridion.Utils.Object.getUniqueId(h.object)||"",l=n[p],l&&(l.length>1?Tridion.Utils.Array.removeAt(l,l.indexOf(h)):(l.length==0||l[0]==h)&&delete n[p]),it=h.object=h.object.getMarshalObject(),p=Tridion.Utils.Object.getUniqueId(it)||"",l=n[p],l?l.push(h):n[p]=[h]);break;case"dispose":n&&i[0].source==h.object&&this.removeAllEventHandlers(h.object);break;case"load":h.object==window&&(e=!1,u(window,"load",h.listeners));break;case"DOMContentLoaded":h.object==document&&(e=!1,u(document,"DOMContentLoaded",h.listeners));break;case"unload":h.object==window?r.dispose():Tridion.Type.isWindow(h.object)&&this.removeAllEventHandlers(h.object);break}return nt?!1:g}};var i=function(n,t,i,u){var o=f(n,!0),s=o.listeners,e=s[t];e||(e=s[t]=r.generateListener(t,o),a(n,t,e,u));i?e.handlers.push({fnc:i}):e.hasNullHandler=!0},h=function(n,t,i){var o=s(n),e,r,f;if(o&&(e=o[t],e))for(r=e.handlers,f=0;f<r.length;f++)if(r[f].fnc==i){r.length!=1||e.hasNullHandler?Tridion.Utils.Array.removeAt(r,f):u(n,t,o);return}},c=function(n){t||(t=Tridion.ValueChangeDetector.getInstance());var r=t.registerObject(n);r&&i(t,r,null)},l=function(n){if(t){var i=t.unregisterObject(n);i&&h(t,i,null)}},a=function(n,t,i,r){t=="valuepropertychange"?c(n):n.addEventListener&&n.addEventListener(t,i,r||!1)},u=function(n,t,i,r){var u=i[t];try{t=="valuepropertychange"?l(n):n.removeEventListener&&n.removeEventListener(t,u,r||!1)}catch(f){}finally{delete u.handlers;delete i[t]}};i(document,"DOMContentLoaded",null);i(window,"load",null);i(window,"unload",null)};Tridion.EventRegisterClass.prototype.generateListener=function(n,t){var r=this,i=function(){return r.executeListener(arguments,n,t,i)};return i.handlers=[],i};Tridion.EventRegister=new Tridion.EventRegisterClass;
Tridion.Type.registerNamespace("Tridion.Core");Tridion.Core.Event=function(n,t,i){this.source=n;this.type=t;this.name=t;this.data=new Object;this.cancel=!1;this.returnValue=!0;for(var r in i)this.data[r]=i[r]};

Tridion.Type.registerNamespace("Tridion.Utils.Localization");Tridion.Utils.Localization.getResource=function(n,t,i){if(Tridion.LocalizedStrings){var r=Tridion.LocalizedStrings[n];if(r&&r[t])return i?Tridion.Utils.String.format(r[t],i):r[t]}return Tridion.Web.UI.Core.Utils.Console.debugWarn(Tridion.Utils.String.format('Localized resource "{0}" does not exist in namespace "{1}".',t,n)),"["+t+"]"};Tridion.Utils.Localization.getCoreResource=function(n,t){return this.getResource("Tridion.Web.Core.Strings",n,t)};Tridion.Utils.Localization.getFormattedDateTime=function(n,t){if(!Tridion.Type.isDate(n))return n;var e=n.getDate(),c=n.getDay(),f=n.getMonth(),l=n.getFullYear(),i=n.getHours(),o=n.getMinutes(),s=n.getSeconds(),u=n.getMilliseconds(),h=n.getTimezoneOffset(),r=this.getLocaleInfo();return t=t||r.shortDateTimeFormat,t.replace(/d{1,4}|M{1,4}|y{4}|y{2}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|z{1}|\'[^\']*\'/g,function(n){var t,a,v;switch(n){case"d":return e;case"dd":return e<10?"0"+e:e;case"ddd":return r.shortDayNames[c];case"dddd":return r.dayNames[c];case"M":return f+1;case"MM":return f<9?"0"+(f+1):f+1;case"MMM":return r.shortMonthNames[f];case"MMMM":return r.monthNames[f];case"yy":return t=l%100,t<10?"0"+t:t;case"yyyy":return l;case"H":return i;case"HH":return i<10?"0"+i:i;case"h":return i>12?i-12:i==0?12:i;case"hh":return a=i>12?i-12:i==0?12:i,a<10?"0"+a:a;case"m":return o;case"mm":return o<10?"0"+o:o;case"s":return s;case"ss":return s<10?"0"+s:s;case"f":return Math.round(u/100);case"ff":return v=Math.round(u/10),v<10?"0"+v:v;case"fff":return u<10?"00"+u:u<100?"0"+u:u;case"t":return(i<12?r.am:r.pm).slice(0,1);case"tt":return i<12?r.am:r.pm;case"z":var y=Math.floor(Math.abs(h)/60),p=Math.abs(h)-y*60,w=y<10?"0"+y:y,b=p<10?"0"+p:p;return"UTC"+(h>0?"-":"+")+w+b;default:return n.replace(/\'/g,"")}})};Tridion.Utils.Localization.getISODateTime=function(n){return Tridion.Utils.Localization.getFormattedDateTime(n,"yyyy-MM-ddTHH:mm:ss.fff")};Tridion.Utils.Localization.TranslateDate=function(n){if(!Tridion.Utils.String.isNullOrEmpty(n)){var t=Tridion.Utils.Date.parse(n);if(t)return Tridion.Utils.Localization.getFormattedDateTime(t)}return n};Tridion.Utils.Localization.getLocaleInfo=function(){var n,t;return window.$models?(t=Tridion.ContentManager.UserSettings.getInstance(),n=t.getLocaleInfo()):n=Tridion.Runtime.LocaleInfo,n};
Tridion.Utils.Localization.getBaseEditorResource=function(n,t){return this.getResource("Tridion.Web.UI.Editors.Base.Strings",n,t)};

Tridion.Utils.Localization.getCmeEditorResource=function(n,t){return this.getResource("Tridion.Web.UI.Editors.CME.Strings",n,t)};
Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Utils.Localization.getEditorResource","8","Tridion.Utils.Localization.getCmeEditorResource",Tridion.Utils.Localization.getCmeEditorResource);
Tridion.Utils.Localization.getXPMCoreEditorResource=function(n,t){return this.getResource("Tridion.Web.UI.Editors.XPMCore.Strings",n,t)};
Tridion.Utils.Localization.getSiteEditEditorResource=function(n,t){return this.getResource("Tridion.Web.UI.Editors.SiteEdit.Strings",n,t)};
Tridion.Utils.Localization.getDevicePreviewEditorResource=function(n,t){return this.getResource("Tridion.Web.UI.Editors.DevicePreview.Strings",n,t)};
Tridion.Type.registerNamespace("Tridion.TranslationManager.Localization");Tridion.TranslationManager.Localization.getEditorResource=function(n,t){return $localization.getResource($tmconst.ResourceBundleName,n,t)};var $tmlocalization=Tridion.TranslationManager.Localization;
Tridion.Type.registerNamespace("Tridion.Core");Tridion.Core.MessageLog=new Tridion.ObjectWithEvents;Tridion.Core.MessageLog.Category={INFO:1,WARNING:2,ERROR:3,DEBUG:10};Tridion.Core.MessageLog.Messages=new Object;Tridion.Core.MessageLog.Messages.INFO=new Array;Tridion.Core.MessageLog.Messages.WARNING=new Array;Tridion.Core.MessageLog.Messages.ERROR=new Array;Tridion.Core.MessageLog.Messages.DEBUG=new Array;Tridion.Core.MessageLog.trace=function(n){var t=Tridion.Utils.Function.getCallStack(arguments.callee);this._addMessage({category:this.Category.DEBUG,message:Tridion.Utils.String.format.apply(this,arguments),stack:t})};Tridion.Core.MessageLog.message=function(n){this.info.apply(this,arguments)};Tridion.Core.MessageLog.info=function(n){this._addMessage({category:this.Category.INFO,message:Tridion.Utils.String.format.apply(this,arguments)})};Tridion.Core.MessageLog.warn=function(n){this._addMessage({category:this.Category.WARNING,message:Tridion.Utils.String.format.apply(this,arguments)})};Tridion.Core.MessageLog.error=function(n){n=n instanceof Error?n.toString():Tridion.Utils.String.format.apply(this,arguments);var t=Tridion.Utils.Function.getCallStack(arguments.callee.caller);this._addMessage({category:this.Category.ERROR,message:n,stack:t})};Tridion.Core.MessageLog.debug=function(){Tridion.Core.Configuration.DebugMode&&this._addMessage({category:this.Category.DEBUG,message:Tridion.Utils.String.format.apply(this,arguments)})};Tridion.Core.MessageLog._addMessage=function(n){var t;switch(n.category){case Tridion.Core.MessageLog.Category.ERROR:t=this.Messages.ERROR;break;case Tridion.Core.MessageLog.Category.WARNING:t=this.Messages.WARNING;break;case Tridion.Core.MessageLog.Category.DEBUG:t=this.Messages.DEBUG;break;default:t=this.Messages.INFO;break}t.push(n.message);this.fireEvent("messagereceived",n)};Tridion.Core.MessageLog.event=function(n,t){};Tridion.Core.MessageLog.eventDone=function(){if($config.DebugMode){var t=new Date,n=document.getElementById("head");n&&(n.setAttribute("log:start",Tridion.StartTime?Tridion.Utils.Localization.getISODateTime(Tridion.StartTime):"0000-00-00T00:00:00.000"),n.setAttribute("log:end",Tridion.Utils.Localization.getISODateTime(t)))}};Tridion.Core.ConsoleLogger=new function(){window.console==null&&(window.console={});window.console.log=window.console.log||Tridion.Utils.Function.EMPTY;window.console.group=window.console.group||Tridion.Utils.Function.EMPTY;window.console.groupEnd=window.console.groupEnd||Tridion.Utils.Function.EMPTY;window.console.info=window.console.info||window.console.log;window.console.warn=window.console.warn||window.console.log;window.console.error=window.console.error||window.console.log;window.console.debug=window.console.debug||window.console.log;var n=this;Tridion.EventRegister.addEventHandler(Tridion.Core.MessageLog,"messagereceived",function(t){switch(t.data.category){case Tridion.Core.MessageLog.Category.ERROR:n._error(t.data);break;case Tridion.Core.MessageLog.Category.WARNING:n._warn(t.data);break;case Tridion.Core.MessageLog.Category.DEBUG:n._debug(t.data);break;default:n._info(t.data);break}})};Tridion.Core.ConsoleLogger._error=function(n){var t=n.stack?n.stack.toString():"";t?(window.console.group(n.message),Tridion.Web.UI.Core.Utils.Console.log(t),window.console.groupEnd()):Tridion.Web.UI.Core.Utils.Console.error(n.message)};Tridion.Core.ConsoleLogger._warn=function(n){Tridion.Web.UI.Core.Utils.Console.warn(n.message)};Tridion.Core.ConsoleLogger._debug=function(n){n.stack?(window.console.group(n.message),Tridion.Web.UI.Core.Utils.Console.debug(n.stack.join("\n")),window.console.groupEnd()):Tridion.Web.UI.Core.Utils.Console.log(n.message)};Tridion.Core.ConsoleLogger._info=function(n){Tridion.Web.UI.Core.Utils.Console.info(n.message)};
Tridion.Type.registerNamespace("Tridion.Core");Tridion.Exception=function(n,t,i,r,u){Tridion.OO.enableInterface(this,"Tridion.Exception");this.properties.messageXml=n;this.properties.messageXmlDoc;this.stackTrace=t;this.type=i;this.source=r;this.innerException=u};Tridion.Exception.prototype.getMessageXml=function(){return this.properties.messageXml};Tridion.Exception.prototype.setMessageXml=function(n){var t=this.properties;n?(t.messageXml=n,t.messageXmlDoc=undefined):t.messageXml=undefined};Tridion.Exception.prototype.getMessageXmlDocument=function(){var n=this.properties;return n.messageXmlDoc===undefined&&n.messageXml&&(Tridion.Utils.Xml.hasParseError(n.messageXml)||(n.messageXmlDoc=Tridion.Utils.Xml.getNewXmlDocument(n.messageXml)||null)),n.messageXmlDoc};Tridion.Exception.prototype.getStackTrace=function(){var n=this.properties;return n.stackTrace};Tridion.Exception.prototype.getType=function(){var n=this.properties;return n.type};Tridion.Exception.prototype.getSource=function(){var n=this.properties;return n.source};Tridion.Exception.prototype.setSource=function(n){var t=this.properties;t.source=n};Tridion.Exception.prototype.getInnerException=function(){var n=this.properties;return n.innerException};

Tridion.Type.registerNamespace("Tridion.Utils");Tridion.Utils.Xml=function(n){return Tridion.Utils.Xml.getOuterXml(n)};Tridion.Utils.Xml.containsNode=function(n,t){if(Tridion.Utils.Assert.isNode(n),Tridion.Utils.Assert.isNode(t),n.nodeType==2)return t==n;else t&&t.nodeType==2&&(t=this.selectSingleNode(t,".."));while(t&&t!=n)t=t.parentNode;return t==n};Tridion.Utils.Xml.createResolver=function(n){return function(t){return n&&n[t]?n[t]:Tridion.Constants.Namespaces[t]}};Tridion.Utils.Xml.createElementNS=function(n,t,i){return Tridion.Utils.Assert.isDocument(n),Tridion.Type.isNullOrUndefined(t)||Tridion.Utils.Assert.isString(t),Tridion.Utils.Assert.isString(i),n.createElementNS?n.createElementNS(t,i):n.createNode(1,i,t)};Tridion.Utils.Xml.createAttributeNS=function(n,t,i){var u,r,f;return Tridion.Utils.Assert.isDocument(n),Tridion.Type.isNullOrUndefined(t)||Tridion.Utils.Assert.isString(t),Tridion.Utils.Assert.isString(i),$dom.isIE?u=n.createNode(2,i,t):(r=n.createElement("dummy"),r.setAttributeNS(t,i,""),f=r.attributes[0],r.removeAttributeNode(f),u=f),u};Tridion.Utils.Xml.setAttributeNodeNS=function(n,t,i){n.setAttributeNodeNS?(n.hasAttribute(t.nodeName)&&n.removeAttribute(t.nodeName),n.setAttributeNodeNS(t,i)):n.setAttributeNode(t)};Tridion.Utils.Xml.escape=function(n,t){return Tridion.Utils.Assert.isString(n),n=n.toString(),n=n.replace(/&/g,"&amp;"),n=n.replace(/</g,"&lt;"),n=n.replace(/>/g,"&gt;"),t&&(n=n.replace(/\'/g,"&apos;"),n=n.replace(/\"/g,"&quot;")),n};Tridion.Utils.Xml.getInnerText=function(n,t,i,r){if(Tridion.Utils.Assert.isNode(n),t){Tridion.Utils.Assert.isString(t);var u=this.selectSingleNode(n,t,r);if(u)return Tridion.Utils.Dom.getInnerText(u);else if(i!=null)return i}else return Tridion.Utils.Dom.getInnerText(n)};Tridion.Utils.Xml.getInnerXml=function(n,t,i){var u,f,r;if(Tridion.Utils.Assert.isNode(n),u=t?this.selectSingleNode(n,t,i):n,u){for(f=[],r=u.firstChild;r;)f.push(this.getOuterXml(r)),r=r.nextSibling;return f.join("")}return""};Tridion.Utils.Xml.getNewXmlDocument=function(n,t,i){var r=null,f=null,s,u,e,o,h;try{if(window.DOMParser&&!Tridion.Utils.Dom.isIE)r=(new window.DOMParser).parseFromString(n,"text/xml"),s=r.documentElement.namespaceURI,r.documentElement.nodeName=="parsererror"&&(s=="http://www.w3.org/1999/xhtml"||s=="http://www.mozilla.org/newlayout/xml/parsererror.xml")?f=this.getInnerText(r):Tridion.Utils.Dom.isWebkit&&(u=r.documentElement.firstChild,u&&u.nodeName=="parsererror"&&u.namespaceURI=="http://www.w3.org/1999/xhtml"?f=Tridion.Utils.Dom.getInnerText(u):u&&(u=u.firstChild)&&u.nodeName=="parsererror"&&u.namespaceURI=="http://www.w3.org/1999/xhtml"&&(f=Tridion.Utils.Dom.getInnerText(u)));else if(e=this.progIDs(),!i&&e.domDocument||i&&e.freeThreadedDOMDocument){r=new ActiveXObject(i?e.freeThreadedDOMDocument:e.domDocument);r.async=t?!0:!1;r.preserveWhiteSpace=!0;o=[];for(h in Tridion.Constants.Namespaces)o.push(Tridion.Utils.String.format('xmlns:{0}="{1}"',h,Tridion.Constants.Namespaces[h]));o.length>0&&r.setProperty("SelectionNamespaces",o.join(" "));r.setProperty("SelectionLanguage","XPath");e.domDocument=="MSXML2.DOMDocument.6.0"&&r.setProperty("AllowXsltScript",!0);n&&r.loadXML(n)}else f="Could not find appropriate progID"}catch(c){Tridion.Web.UI.Core.Utils.Console.error(c.message);f=c.message}return f!==null&&(r={parseError:{errorCode:1,reason:f,srcText:n}}),r};Tridion.Utils.Xml.getNewXsltProcessor=function(n){var t,i,r,u,n,e;if(Tridion.Utils.Assert.isNotNullOrUndefined(n),t=Tridion.Type.isString(n)?this.getNewXmlDocument(n):n,window.XSLTProcessor){i=new XSLTProcessor;Tridion.Utils.Dom.isGecko&&(r=this.selectSingleNode(t,"/xsl:stylesheet/xsl:output/@method[.='html']"),r&&(r.value="xml"));try{i.importStylesheet(t)}catch(f){Tridion.Web.UI.Core.Utils.Console.error(f.message);throw f;}return i}else if(u=this.progIDs(),u.xslTemplate)return n=new ActiveXObject(u.xslTemplate),e=this.getNewXmlDocument(t.xml,!0,!0),n.stylesheet=e,n.createProcessor();else throw Error("Unable to create xsltProcessor");};Tridion.Utils.Xml.getParentNode=function(n){return Tridion.Utils.Assert.isNode(n),n.nodeType==2?this.selectSingleNode(n,".."):n.parentNode};Tridion.Utils.Xml.getOuterXml=function(n,t){var i,r;return Tridion.Utils.Assert.isNode(n),i=t?this.selectSingleNode(n,t):n,i?Tridion.Type.isString(i.xml)?i.xml:i.nodeName==="iframe"?(r=document.createElement("div"),r.appendChild(i),i.outerHTML):(new XMLSerializer).serializeToString(i):void 0};Tridion.Utils.Xml.getParseError=function(n){return(Tridion.Utils.Assert.isDocument(n),this.hasParseError(n))?Tridion.Utils.String.format("{0}: ({1})",n.url,n.parseError.reason):null};Tridion.Utils.Xml.hasParseError=function(n){return n.parseError&&n.parseError.errorCode!=0||!1};Tridion.Utils.Xml.progIDs=function(){var n=this.progIDs,r,i,u,t;if(!n.initialized)for(n.initialized=!0,r=[".6.0",".3.0"],i=0,u=r.length;i<u;i++){if(t=r[i],!n.domDocument)try{new ActiveXObject("MSXML2.DOMDocument"+t);n.domDocument="MSXML2.DOMDocument"+t}catch(f){}if(!n.freeThreadedDOMDocument)try{new ActiveXObject("MSXML2.FreeThreadedDOMDocument"+t);n.freeThreadedDOMDocument="MSXML2.FreeThreadedDOMDocument"+t}catch(f){}if(!n.xmlHttp)try{new ActiveXObject("MSXML2.XMLHTTP"+t);n.xmlHttp="MSXML2.XMLHTTP"+t}catch(f){}if(!n.xslTemplate)try{new ActiveXObject("MSXML2.XSLTemplate"+t);n.xslTemplate="MSXML2.XSLTemplate"+t}catch(f){}if(n.domDocument&&n.freeThreadedDOMDocument&&n.xmlHttp&&n.xslTemplate)break}return n};Tridion.Utils.Xml.selectStringValue=function(n,t,i){var r=!n||n.nodeType==9?n:n.ownerDocument,h,f,u,e,o,s;if(Tridion.Utils.Assert.isDocument(r),r.evaluate)return h=XPathResult?XPathResult.STRING_TYPE:2,f=r.evaluate(t,n,this.createResolver(i),h,null),f?f.stringValue:null;else{if(i){u=String(r.getProperty("SelectionNamespaces")||"").split(" ");for(e in i)o=Tridion.Utils.String.format('xmlns:{0}="{1}"',e,i[e]),Tridion.Utils.Array.contains(u,o)||u.push(o);r.setProperty("SelectionNamespaces",u.join(" "))}return s=n.selectSingleNode(t),s?Tridion.Utils.Dom.getNodeValue(s):null}};Tridion.Utils.Xml.needXPathFixForNamespacedAttributes=function(){var i='<root xmlns:x="someNamespace"><sep x:id="2"/><\/root>',r=new DOMParser,n=r.parseFromString(i,"text/xml"),t;return n.evaluate?(t=n.createNSResolver(n.documentElement),!(n.evaluate("count(//@x:id)",n,t,XPathResult.NUMBER_TYPE,null).numberValue===1)):!1}();Tridion.Utils.Xml.replaceAttrPrefix=function(n,t){return n.replace(/\@(\w[\w\d\-_]*?)\:([\w\d\-_\*]+)/gi,function(n,i,r){return r!=="*"?'@*[namespace-uri() = "'+t(i)+'" and local-name() = "'+r+'"]':'@*[namespace-uri() = "'+t(i)+'"]'})};Tridion.Utils.Xml.selectSingleNode=function(n,t,i){var r=!n||n.nodeType==9?n:n.ownerDocument,f,s,h,u,e,o;if(Tridion.Utils.Assert.isDocument(r),r.evaluate)return f=this.createResolver(i),Tridion.Utils.Xml.needXPathFixForNamespacedAttributes&&(t=Tridion.Utils.Xml.replaceAttrPrefix(t,f)),s=XPathResult?XPathResult.FIRST_ORDERED_NODE_TYPE:9,h=r.evaluate(t,n,f,s,null),h.singleNodeValue;else{if(i){u=String(r.getProperty("SelectionNamespaces")||"").split(" ");for(e in i)o=Tridion.Utils.String.format('xmlns:{0}="{1}"',e,i[e]),Tridion.Utils.Array.contains(u,o)||u.push(o);r.setProperty("SelectionNamespaces",u.join(" "))}return n.selectSingleNode(t)}};Tridion.Utils.Xml.selectNodes=function(n,t,i){var u,r,e,f,s,h;if(Tridion.Utils.Assert.isNode(n),u=[],r=n.nodeType==9?n:n.ownerDocument,Tridion.Utils.Assert.isDocument(r),r.evaluate){e=this.createResolver(i);Tridion.Utils.Xml.needXPathFixForNamespacedAttributes&&(t=Tridion.Utils.Xml.replaceAttrPrefix(t,e));for(var l=XPathResult?XPathResult.ORDERED_NODE_ITERATOR_TYPE:5,c=r.evaluate(t,n,e,l,null),o=c.iterateNext();o;)u[u.length]=o,o=c.iterateNext()}else{if(i){f=String(r.getProperty("SelectionNamespaces")||"").split(" ");for(s in i)h=Tridion.Utils.String.format('xmlns:{0}="{1}"',s,i[s]),Tridion.Utils.Array.contains(f,h)||f.push(h);r.setProperty("SelectionNamespaces",f.join(" "))}u=n.selectNodes(t)}return u};Tridion.Utils.Xml.removeAll=function(n){var i,r,t;if(typeof n.context!="undefined")n.removeAll();else for(i=0,r=n.length;i<r;i++){t=n[i];switch(t.nodeType){case 2:this.getParentNode(t).removeAttributeNode(t);break;default:t.parentNode.removeChild(t);break}}};Tridion.Utils.Xml.setInnerXml=function(n,t){Tridion.Utils.Assert.isNode(n);Tridion.Utils.Assert.isString(t);Tridion.Utils.Dom.setInnerText(n,"");for(var u=this.getNewXmlDocument("<r>"+t+"<\/r>"),r=this.importNode(n.ownerDocument,u.documentElement,!0),i=r.firstChild;i;)n.appendChild(i),i=r.firstChild};Tridion.Utils.Xml.importNode=function(n,t,i){var r,u,f;if(Tridion.Utils.Assert.isDocument(n),Tridion.Utils.Assert.isNode(t),Tridion.Utils.Dom.isIE&&this.progIDs().domDocument=="MSXML2.DOMDocument.3.0")return t.cloneNode(i);else{try{r=n.importNode(t,i)}catch(e){u=$xml.getOuterXml(t);f=$xml.getNewXmlDocument(u);r=n.importNode(f.documentElement,i)}return r}};Tridion.Utils.Xml.setOuterXml=function(n,t){if(Tridion.Utils.Assert.isElement(n),t){var r=this.getNewXmlDocument(t),i=this.importNode(n.ownerDocument,r.documentElement,!0);return n.parentNode.replaceChild(i,n),i}else return Tridion.Utils.Dom.removeNode(n,!0),null};Tridion.Utils.Xml.transformToXmlDocument=function(n,t,i){return Tridion.Utils.Assert.isNode(n),Tridion.Utils.Assert.isNotNullOrUndefined(t),this.xsltTransform(t,n,i,!0)};Tridion.Utils.Xml.transformToString=function(n,t,i){return Tridion.Utils.Assert.isNode(n),Tridion.Utils.Assert.isNotNullOrUndefined(t),this.xsltTransform(t,n,i,!1)};Tridion.Utils.Xml.transformToXslProcessor=function(n,t,i,r){var e,o,f,u,s,t;if(Tridion.Utils.Assert.isNode(n),Tridion.Utils.Assert.isNotNullOrUndefined(t),e=new Array,o=new Array,r)for(f in r)o.push(f),e.push(Tridion.Utils.String.format('xmlns:{0}="{1}"',f,r[f]));return u=this.transformToString(n,t,i),u.match(/xmlns:xsl/)&&(u=u.replace(/xmlns:out="[^\"]+"/g,"")),u=u.replace(/XSL\/Transform\/Generated/,"XSL/Transform"),u=u.replace(/<out:/g,"<xsl:"),u=u.replace(/<\/out:/g,"<\/xsl:"),u=u.replace(/xmlns:out/g,"xmlns:xsl"),u=u.replace(/[\s\S]*(<xsl:stylesheet .*?)>/,"$1 "+e.join(" ")+' exclude-result-prefixes="'+o.join(" ")+'">'),s=this.getNewXmlDocument(u),t=this.getNewXsltProcessor(s),t};Tridion.Utils.Xml.xsltTransform=function(n,t,i,r){var u=null,f;try{if(n&&t){if(typeof i=="object")for(f in i)i[f]!=null&&(n.setParameter?n.setParameter(null,f,i[f]):n.addParameter(f,i[f]));n.transformToDocument?(u=n.transformToDocument(t),r||(u=this.getOuterXml(u)),n.clearParameters()):(n.reset(),n.input=t,r?(u=this.getNewXmlDocument(),n.output=u,n.transform()):(n.transform(),u=n.output),n.output=null)}}catch(e){Tridion.Web.UI.Core.Utils.Console.error(e.message);throw e;}return u};Tridion.Utils.Xml.getAttributes=function(n){return this.selectNodes(n,"@*")};Tridion.Utils.Xml.toJson=function(n){var u,t,o,h,f,r,e;if(Tridion.Utils.Assert.isNode(n),u=n.nodeType,u==9&&(n=n.documentElement,Tridion.Utils.Assert.isElement(n),u=n.nodeType),t={},u==2)t=n.value;else if(u==1){var s=this.getAttributes(n),c=s.length,i=this.getFirstElementChild(n);if(c||i){for(o=0,f=0;f<c;f++)o++,t["@"+Tridion.Utils.Dom.getLocalName(s[f])]=this.toJson(s[f]);while(i)r=Tridion.Utils.Dom.getLocalName(i),r in t?(e=t[r],Tridion.Type.isArray(e)||(h=r,e=t[r]=[e]),e.push(this.toJson(i))):(o++,t[r]=this.toJson(i)),i=this.getNextElementSibling(i);o==1&&h&&(t=t[h])}else t=Tridion.Utils.Dom.getInnerText(n)}return t};Tridion.Utils.Xml.getLocalNames=function(n){for(var i=[],t=$xml.getFirstElementChild(n);t;)i.push($dom.getLocalName(t)),t=$xml.getNextElementSibling(t);return i};Tridion.Utils.Xml.getIndexFromXPath=function(n){Tridion.Utils.Assert.isString(n);var t=undefined,i=n.match(/(\d+)]$/)[1];return i&&(t=parseInt(i,10)),t};Tridion.Utils.Xml.changeIndexInXPath=function(n,t){return Tridion.Utils.Assert.isString(n),Tridion.Utils.Assert.isNumber(t),n.replace(/\d+\]$/,t+"]")};Tridion.Utils.Xml.removeIndexFromXPath=function(n){return Tridion.Utils.Assert.isString(n),n.replace(/\[\d+\]$/,"")};Tridion.Utils.Xml.getPreviousElementSibling=function(n){for(n=n.previousSibling;n&&n.nodeType!=1;)n=n.previousSibling;return n};Tridion.Utils.Xml.getNextElementSibling=function(n){for(n=n.nextSibling;n&&n.nodeType!=1;)n=n.nextSibling;return n};Tridion.Utils.Xml.getFirstElementChild=function(n){return n=n.firstChild,n&&n.nodeType!=1&&(n=this.getNextElementSibling(n)),n};Tridion.Utils.Xml.getLastElementChild=function(n){return n=n.lastChild,n&&n.nodeType!=1&&(n=this.getPreviousElementSibling(n)),n};Tridion.Utils.Xml.getModifiedValueFromNode=function(n,t,i,r){Tridion.Utils.Assert.isNode(n);Tridion.Utils.Assert.isString(t);Tridion.Utils.Assert.isFunction(i);var u,f=Tridion.Utils.Xml.selectSingleNode(n,t,r);return f&&(u=Tridion.Utils.Xml.getInnerText(f,null,null,r),u=i(u)),u};


Tridion.Type.registerNamespace("Tridion.Utils");Tridion.Utils.Dom=function(){var n={},u=function(){var i=undefined,t=navigator.userAgent,n=t.match(/ rv\:((\d+)\.(\d+))/);if(!n){var r=t.match(/ Edge\/((\d+)\.(\d+))/),u=t.match(/ OPR\/((\d+)\.(\d+))/),f=t.match(/ Chrome\/((\d+)\.(\d+))/),e=t.match(/ MSIE ((\d+)\.(\d+))/),o=t.match(/ Version\/((\d+)\.(\d+)) Safari\/(d+)/);r?n=r:u?n=u:f?n=f:e?n=e:o&&(n=o)}return n&&(i=parseInt(n[2],10)),i},i={EDGE:"Edge",GECKO:"Gecko",KHTML:"KHTML",PRESTO:"Presto",TRIDENT:"Trident",WEBKIT:"WebKit"},f=function(){var n=undefined,t=navigator.userAgent;return t.match(/ Edge\/\d+/)?n=i.EDGE:t.match(/ Trident\/\d+/)?n=i.TRIDENT:t.match(/ (Apple)?WebKit\/\d+/)?n=i.WEBKIT:t.match(/ Gecko\/\d+/)&&(n=i.GECKO),n},e=u(),r=f(),t=navigator.userAgent;return n.isIE=t.indexOf("MSIE")>-1||r===i.TRIDENT,n.isIE10=t.indexOf("MSIE 10")>-1,n.isIE11=r===i.TRIDENT&&e===11,n.isEdge=r===i.EDGE,n.isGecko=t.indexOf("Gecko")>-1&&t.indexOf("Firefox")>-1||r===i.GECKO,n.isWebkit=!n.isEdge&&!n.isGecko&&t.indexOf("WebKit")>-1,n.isSafari=!n.isEdge&&t.indexOf("Safari")>-1&&t.indexOf("Chrome")==-1,n.isChrome=!n.isEdge&&!n.isSafari&&t.indexOf("Chrome")>-1,n.isMacintosh=t.indexOf("Macintosh")>-1,n}();Tridion.Utils.Dom.hideFocus=function(){for(var t=Tridion.Utils.Array.fromArguments(arguments),n=0;n<t.length;n++)Tridion.Utils.Css(t[n],"outline","0"),t[n].hideFocus=!0};Tridion.Utils.Dom.getInnerText=function(n,t){var e,i,o,r;if(Tridion.Utils.Assert.isNode(n),Tridion.Type.isNullOrUndefined(t)||Tridion.Utils.Assert.isBoolean(t),n.nodeType==9&&(n=n.documentElement),n.nodeType==2&&n.value!=undefined)return n.value;else if(n.textContent!=undefined){if(t){function u(n,t){n&&(n.nodeType==3?n.nodeValue=n.nodeValue.replace(/\n/g," "):u(n.firstChild,!0),t&&u(n.nextSibling,!0))}u(n,!1);function f(n,t){for(var i,r=0,u=n.length;r<u;r++)i=n[r],i.parentNode.insertBefore(i.ownerDocument.createTextNode("\n"),t?i:i.nextSibling)}for(f(n.getElementsByTagName("br"),!0),e=["p","div","h1","h2","h3","h4","h5","h6"],i=0,o=e.length;i<o;i++)r=n.getElementsByTagName(e[i]),r.length>0&&(f(r,!0),f(r,!1))}return n.textContent}else return n.innerText!=undefined?n.innerText:n.text};Tridion.Utils.Dom.setInnerText=function(n,t){Tridion.Utils.Assert.isNode(n);Tridion.Utils.Assert.isString(t);n.nodeType==9&&(n=n.documentElement);n.nodeType==2&&n.value!=undefined?n.value=t:n.textContent!=undefined?n.textContent=t:n.innerText!=undefined?n.innerText=t:n.text=t};Tridion.Utils.Dom.getNodeValue=function(n){return Tridion.Utils.Assert.isNode(n),n.nodeType==2?n.value:n.nodeValue};Tridion.Utils.Dom.getNodeTextContent=function(n){return Tridion.Utils.Assert.isNode(n),n.nodeType==2?n.value:n.textContent};Tridion.Utils.Dom.escape=function(n){return Tridion.Utils.Assert.isString(n),n=Tridion.Utils.Xml.escape(n,!0),n=n.replace("&apos;","&#39;"),n.replace(/ {2}/g," "+String.fromCharCode("160"))};Tridion.Utils.Dom.getLocalName=function(n){return Tridion.Utils.Assert.isNode(n),n.localName||n.baseName||n.nodeName.replace(/^[a-zA-Z0-9]+\:/,"")};Tridion.Utils.Dom.getAncestor=function(n,t){Tridion.Utils.Assert.isNode(n);Tridion.Utils.Assert.isString(t);var i=n.parentNode;return i==null?null:Tridion.Utils.Dom.getAncestorOrSelf(i,t)};Tridion.Utils.Dom.getAncestorOrSelf=function(n,t){Tridion.Utils.Assert.isNode(n);Tridion.Utils.Assert.isString(t);for(var i=n;i&&Tridion.Sizzle.matches(t,[i]).length==0;)i=i.parentNode;return i};Tridion.Utils.Dom.getFirstElementSibling=function(n){return Tridion.Utils.Assert.isNode(n),n.parentNode&&(n=n.parentNode.firstChild,n&&n.nodeType!=1&&(n=Tridion.Utils.Dom.getNextElementSibling(n))),n};Tridion.Utils.Dom.getLastElementSibling=function(n){return Tridion.Utils.Assert.isNode(n),n.parentNode&&(n=n.parentNode.lastChild,n&&n.nodeType!=1&&(n=Tridion.Utils.Dom.getPreviousElementSibling(n))),n};Tridion.Utils.Dom.disableTextSelection=function(){for(var n,i=Tridion.Utils.Array.fromArguments(arguments),t=0;t<i.length;t++)n=i[t],Tridion.Utils.Assert.isHtmlElement(n),n.style.MozUserSelect!==undefined?n.style.MozUserSelect="-moz-none":n.style.webkitUserSelect!==undefined?n.style.webkitUserSelect="none":n.style.msUserSelect!==undefined&&(n.style.msUserSelect="none")};Tridion.Utils.Dom.enableTextSelection=function(){for(var n,i=Tridion.Utils.Array.fromArguments(arguments),t=0;t<i.length;t++)n=i[t],Tridion.Utils.Assert.isHtmlElement(n),n.style.MozUserSelect!==undefined?n.style.MozUserSelect="text":n.style.webkitUserSelect!==undefined?n.style.webkitUserSelect="text":n.style.msUserSelect!==undefined&&(n.style.msUserSelect="text")};Tridion.Utils.Dom.disableSelection=function(n,t){var r,i;if(Tridion.Utils.Assert.isHtmlElement(n),Tridion.Type.isNullOrUndefined(t)||Tridion.Utils.Assert.isBoolean(t),n.style.MozUserSelect!==undefined&&(n.style.MozUserSelect="none"),n.style.webkitUserSelect!==undefined&&(n.style.webkitUserSelect="none"),t)for(r=n.getElementsByTagName("*"),i=0;i<r.length;i++)r[i].setAttribute("unselectable","on");n.setAttribute("unselectable","on")};Tridion.Utils.Dom.enableSelection=function(n,t){var r,i;if(Tridion.Utils.Assert.isHtmlElement(n),Tridion.Type.isNullOrUndefined(t)||Tridion.Utils.Assert.isBoolean(t),n.style.MozUserSelect&&(n.style.MozUserSelect=""),n.style.webkitUserSelect&&(n.style.webkitUserSelect=""),t)for(r=n.getElementsByTagName("*"),i=0;i<r.length;i++)r[i].removeAttribute("unselectable");n.removeAttribute("unselectable")};Tridion.Utils.Dom.getViewSize=function(n){Tridion.Utils.Assert.isWindow(n);var r=n.document,f=r.documentElement,u=r.body,t=f.clientWidth,i=f.clientHeight;return isNaN(r.clientWidth)?isNaN(f.clientWidth)||t>self.innerWidth||i>self.innerHeight?(t=u.clientWidth,i=u.clientHeight):(t=t?t:u.clientWidth,i=i?i:u.clientHeight):(t=r.clientWidth,i=r.clientHeight),{w:t,h:i}};Tridion.Utils.Dom.getElementPosition=function(n){Tridion.Utils.Assert.isHtmlElement(n);var i=0,r=0,e=0,o=0;if(n.getBoundingClientRect&&n.getClientRects&&n.getClientRects().length>0){var f=n.ownerDocument,u=n.getBoundingClientRect(),t={};Tridion.Utils.Dom.isGecko?(t.top=Math.floor(u.top),t.left=Math.floor(u.left),t.width=Math.floor(u.width),t.height=Math.floor(u.height)):t=u;i=t.left+(f.documentElement.scrollLeft||f.body.scrollLeft);r=t.top+(f.documentElement.scrollTop||f.body.scrollTop);e=t.width!=undefined?t.width:t.right-t.left;o=t.height!=undefined?t.height:t.bottom-t.top;Tridion.Utils.Dom.isIE&&(i=i-(parseInt(n.currentStyle.borderLeftWidth)||0),r=r-(parseInt(n.currentStyle.borderTopWidth)||0))}else for(e=n.offsetWidth,o=n.offsetHeight;n!=null;)i+=n.offsetLeft,r+=n.offsetTop,n=n.offsetParent;return{x:i,y:r,w:e,h:o}};Tridion.Utils.Dom.getUniqueID=function(n){return Tridion.Utils.Assert.isNode(n),n.uniqueID===undefined&&(n.uniqueID=Tridion.Utils.Dom.generateUniqueID()),n.uniqueID};Tridion.Utils.Dom.generateUniqueID=function(){return"UID_"+Tridion.Utils.Object.getNextId()};Tridion.Utils.Dom.removeNode=function(n,t){if(Tridion.Utils.Assert.isNode(n),Tridion.Type.isNullOrUndefined(t)||Tridion.Utils.Assert.isBoolean(t),n.removeNode)n.removeNode(t!==!1);else{var i=n.parentNode;if(i){if(t===!1)while(n.firstChild)i.insertBefore(n.firstChild,n);i.removeChild(n)}}};Tridion.Utils.Dom.getSelectedValuesFromSelect=function(n){var t,u;Tridion.Utils.Assert.isHtmlElement(n);var r=[],i=n.options,f=i.length;for(t=0;t<f;t++)u=i[t],i.selected&&r.push(u.value);return r};Tridion.Utils.Dom.setValuesToSelect=function(n,t){Tridion.Utils.Assert.isHtmlElement(n);Tridion.Utils.Assert.isArray(t);var i=t.slice(),r=function(n){var t=i.indexOf(n.value);t===-1?n.selected=!1:(n.selected=!0,i.splice(t,1))};Tridion.Utils.Array.each(n.options,r)};Tridion.Utils.Dom.addOption=function(n,t,i,r,u){Tridion.Utils.Assert.isHtmlElement(n);var f=n.ownerDocument.createElement("option");return f.text=t,f.value=i,r&&(f.title=r),n.add(f,u>=0?u:null),f};Tridion.Utils.Dom.hasOption=function(n,t){if(Tridion.Utils.Assert.isHtmlElement(n),n.options)for(var i=0;i<n.options.length;i++)if(n.options[i].value==t)return!0;return!1};Tridion.Utils.Dom.getSelectedOptions=function(n){var i,r,t,u;for(Tridion.Utils.Assert.isHtmlElement(n),i=[],t=0,u=n.options.length;t<u;t++)r=n.options[t],r.selected&&i.push(r.value);return i};Tridion.Utils.Dom.offsetLeft=function(n){var t,i,r;for(Tridion.Utils.Assert.isHtmlElement(n),t=n,i=0;t&&t.nodeName;)r=t.offsetLeft-t.scrollLeft,i+=r,t=t.offsetParent,t&&t.tagName=="BODY"&&(i+=parseInt(Tridion.Utils.Css(t,"marginLeft")||0));return i};Tridion.Utils.Dom.offsetTop=function(n){var t,i,r;for(Tridion.Utils.Assert.isHtmlElement(n),t=n,i=0;t&&t.nodeName;)r=t.offsetTop-t.scrollTop,i+=r,t=t.offsetParent,t&&t.tagName=="BODY"&&(i+=parseInt(Tridion.Utils.Css(t,"marginTop")||0));return i};Tridion.Utils.Dom.changeTagName=function(n,t,i){Tridion.Utils.Assert.isElement(n);Tridion.Utils.Assert.isString(t);var r=null,u=n.name;return u&&Tridion.Utils.Dom.isIE?r=n.ownerDocument.createElement("<"+t+' name="'+u.replace(/\"/g,"&quot;")+'">'):(r=n.ownerDocument.createElement(t),u&&(r.name=n.name)),Tridion.Utils.Dom.copyAttributes(n,r,!0,i),Tridion.Utils.Dom.applyElement(n,r,"outside"),Tridion.Utils.Dom.removeNode(n,!1),r};Tridion.Utils.Dom.applyElement=function(n,t,i){if(Tridion.Utils.Assert.isElement(n),Tridion.Utils.Assert.isElement(t),Tridion.Utils.Assert.isString(i),n.applyElement)n.applyElement(t,i);else switch(i){case"outside":var r=n.parentNode;r.insertBefore(t,n);t.appendChild(n);break;case"inside":while(n.firstChild)t.appendChild(n.firstChild);n.appendChild(t);break}};Tridion.Utils.Dom.copyAttributes=function(n,t,i,r){var o,f,e,h,u,s;for(Tridion.Utils.Assert.isElement(n),Tridion.Utils.Assert.isElement(t),Tridion.Type.isNullOrUndefined(i)||Tridion.Utils.Assert.isBoolean(i),Tridion.Type.isNullOrUndefined(r)||Tridion.Utils.Assert.isObject(r),o=n.attributes,e=0,h=o.length;e<h;e++)f=o[e],f.specified&&(u=f.nodeName,u.toLowerCase()!="xmlns:fa"&&u!="uniqueID"&&(i||!t.getAttribute(u))&&(u=="class"||u=="className"?(s=f.value,(!r||r[s])&&(t.className=s)):t.setAttribute(u,f.value)));(t.style.cssText.length>0||n.style.cssText.length>0)&&(t.style.cssText=i?t.style.cssText+";"+n.style.cssText:n.style.cssText+";"+t.style.cssText)};Tridion.Utils.Dom.getTagName=function(n){return Tridion.Utils.Assert.isElement(n),n.tagName.toLowerCase()};Tridion.Utils.Dom.getSelection=function(n){Tridion.Utils.Assert.isDocument(n);var t=null;return n.getSelection?t=n.getSelection():n.selection?t=n.selection:n.defaultView&&(t=n.defaultView.getSelection()),t};Tridion.Utils.Dom.createRange=function(n){Tridion.Utils.Assert.isNode(n);var t=null,i=n.ownerDocument;return i.createRange&&(t=i.createRange()),t};Tridion.Utils.Dom.createTextRange=function(n){var t,i,f,r,u;return Tridion.Utils.Assert.isNode(n),t=null,n.createTextRange?t=n.createTextRange():(i=n.parentTextEdit,i&&i.createTextRange?t=i.createTextRange():(f=n.ownerDocument,r=f.body,r&&r.createTextRange&&(t=r.createTextRange()))),t||(u=Tridion.Utils.Dom.createRange(n),u&&(t=u)),t};Tridion.Utils.Dom.setEndPoint=function(n,t,i){if(n.setStart)switch(i){case"StartToStart":n.setStart(t.startContainer,t.startOffset);break;case"StartToEnd":n.setStart(t.endContainer,t.endOffset);break;case"EndToStart":n.setEnd(t.startContainer,t.startOffset);break;case"EndToEnd":n.setEnd(t.endContainer,t.endOffset);break}else n.setEndPoint(i,t)};Tridion.Utils.Dom.moveRangeToElement=function(n,t){n.selectNode?n.selectNodeContents(t):n.moveToElementText(t)};Tridion.Utils.Dom.selectRange=function(n,t){if(n.select)try{n.select()}catch(i){}else t&&t.addRange&&(t.removeAllRanges(),t.addRange(n))};Tridion.Utils.Dom.swapNodes=function(n,t){var i,r,u;Tridion.Utils.Assert.isNode(n);Tridion.Utils.Assert.isNode(t);i=n.nextSibling;r=t.nextSibling;i==t?n.parentNode.insertBefore(t,n):r==n?t.parentNode.insertBefore(n,t):(u=n.parentNode,t.parentNode.insertBefore(n,r),u.insertBefore(t,i))},function(){var n=document.documentElement,t=document.defaultView,i=document.compatMode,r,u=i?i!="BackCompat":((r=document.createElement("p").style).width="1",!r.width);Tridion.Utils.Dom.isBodyActingRoot=n.clientWidth===0;Tridion.Utils.Dom.isWindowOffsetsSupported=!!t&&typeof t.pageXOffset!="undefined";Tridion.Utils.Dom.isCurrentStyleSupported=typeof n.currentStyle!="undefined";Tridion.Utils.Dom.isDocumentClientTop=typeof n.clientTop!="undefined";Tridion.Utils.Dom.isQuirksMode=!u}();Tridion.Utils.Dom.getElementBoxPosition=function(n,t){Tridion.Utils.Assert.isElement(n);Tridion.Type.isNullOrUndefined(t)||Tridion.Utils.Assert.isBoolean(t);var u=n[document.documentElement&&typeof document.documentElement.ownerDocument!="undefined"?"ownerDocument":"document"],c=u.documentElement,f=u.body,r=u,e={x:0,y:0,h:0,w:0};if(n===r)return e;var l=Tridion.Utils.Dom.isBodyActingRoot?f:c,i=n.getBoundingClientRect(),a=u.defaultView||u.parentWindow,p=Tridion.Utils.Dom.isQuirksMode&&Math.max(Tridion.Utils.Dom.isWindowOffsetsSupported?a.pageXOffset:0,c.scrollLeft,f.scrollLeft),w=Tridion.Utils.Dom.isQuirksMode&&Math.max(Tridion.Utils.Dom.isWindowOffsetsSupported?a.pageYOffset:0,c.scrollTop,f.scrollTop),o=i.left+(t?0:p),s=i.top+(t?0:w),b=i.width!=undefined?i.width:i.right-i.left,k=i.height!=undefined?i.height:i.bottom-i.top,h,v=l.clientTop,y=l.clientLeft;return Tridion.Utils.Dom.isDocumentClientTop&&(o-=y,s-=v),r!==u&&(i=Tridion.Utils.Dom.getElementBoxPosition(r),o-=i.x,s-=i.y,Tridion.Utils.Dom.isDocumentClientTop&&(Tridion.Utils.Dom.isBodyActingRoot&&r===f?(o-=y,s-=v):r!==u&&r!==c&&r!==f&&(o-=r.clientLeft,s-=r.clientTop))),Tridion.Utils.Dom.isBodyActingRoot&&Tridion.Utils.Dom.isCurrentStyleSupported&&r!=u&&r!==f&&(h=f.currentStyle,o+=parseFloat(h.marginLeft)||0+parseFloat(h.left)||0,s+=parseFloat(h.marginTop)||0+parseFloat(h.top)||0),e.x=o,e.y=s,e.w=b,e.h=k,e};Tridion.Utils.Dom.getScrollTop=function(n){return n.documentElement.scrollTop||n.body.scrollTop};Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Utils.Dom.getParentWindow","8.2","element.ownerDocument.defaultView",function(n){return Tridion.Utils.Assert.isElement(n),n.ownerDocument.defaultView});Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Utils.Dom.getSrcElement","8.2","event.target",function(n){return n.target});Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Utils.Dom.setTextAttribute","8.2","element.setAttribute(attributeName, attributeValue)",function(n,t,i){Tridion.Utils.Assert.isElement(n);Tridion.Utils.Assert.isString(t);Tridion.Utils.Assert.isString(i);n.setAttribute(t,i)});Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Utils.Dom.removeTextAttribute","8.2","element.removeAttribute(attributeName)",function(n,t){Tridion.Utils.Assert.isElement(n);Tridion.Utils.Assert.isString(t);n.removeAttribute(t)});Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Utils.Dom.getPreviousElementSibling","8.2","node.previousElementSibling, or for XML nodes use Tridion.Utils.Xml.getPreviousElementSibling",function(n){for(Tridion.Utils.Assert.isNode(n),n=n.previousSibling;n&&n.nodeType!=1;)n=n.previousSibling;return n});Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Utils.Dom.getNextElementSibling","8.2","node.nextElementSibling, or for XML nodes use Tridion.Utils.Xml.getNextElementSibling",function(n){for(Tridion.Utils.Assert.isNode(n),n=n.nextSibling;n&&n.nodeType!=1;)n=n.nextSibling;return n});Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Utils.Dom.getFirstElementChild","8.2","node.firstElementChild, or for XML nodes use Tridion.Utils.Xml.getFirstElementChild",function(n){return Tridion.Utils.Assert.isNode(n),n=n.firstChild,n&&n.nodeType!=1&&(n=Tridion.Utils.Dom.getNextElementSibling(n)),n});Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Utils.Dom.getLastElementChild","8.2","node.lastElementChild, or for XML nodes use Tridion.Utils.Xml.getLastElementChild",function(n){return Tridion.Utils.Assert.isNode(n),n=n.lastChild,n&&n.nodeType!=1&&(n=Tridion.Utils.Dom.getPreviousElementSibling(n)),n});Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Utils.Dom.getOuterHTML","8.2","element.outerHTML",function(n){return Tridion.Utils.Assert.isElement(n),n.outerHTML});Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Utils.Dom.setOuterHTML","8.2","element.outerHTML",function(n,t){Tridion.Utils.Assert.isHtmlElement(n);Tridion.Utils.Assert.isString(t);n.outerHTML=t});Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Utils.Dom.containsNode","8.2","element.contains(otherElement), or for XML nodes use Tridion.Utils.Xml.containsNode",function(n,t){for(Tridion.Utils.Assert.isNode(n),Tridion.Utils.Assert.isNode(t);t&&t!=n;)t=t.parentNode;return t==n});
Tridion.Runtime={LocaleInfo:{am:"AM",pm:"PM",languageId:1033,localeId:2057,fullDateTimeFormat:"dd MMMM yyyy HH:mm:ss",shortDateTimeFormat:"dd/MM/yyyy HH:mm:ss",longDateFormat:"dd MMMM yyyy",longTimeFormat:"HH:mm:ss",shortDateFormat:"dd/MM/yyyy",shortTimeFormat:"HH:mm",firstDayOfWeek:1,dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}};
Tridion.Type.registerNamespace("Tridion.Core.Configuration");Tridion.Core.Configuration.expandThemePath=function(n,t){var u=Tridion.Core.Configuration.ThemePath||"",i,r,f;return t&&(i=Tridion.Core.Configuration.Editors,i&&(r=i[t],r&&(u=r.theme))),n=n||"",f=u+n,f.replace(/\/{2,}/g,"/")};Tridion.Core.Configuration.expandEditorPath=function(n,t){var u=Tridion.Core.Configuration.EditorPath,i,r,f;return t&&(i=Tridion.Core.Configuration.Editors,i&&(r=i[t],r&&(u=r.vdir))),n=n||"",f=u+n,f.replace(/\/{2,}/g,"/")};Tridion.Core.Configuration.expandModelPath=function(n,t){return(Tridion.Core.Configuration.Models[t].vdir+n).replace(/\/{2,}/g,"/")};Tridion.Core.Configuration.getPathVersion=function(){var n=Tridion.Core.Configuration.Version||0,t=Tridion.Core.Configuration.Modification||0;return Tridion.Utils.String.format("_v{0}.{1}_",n,t)};Tridion.Core.Configuration.expandCorePath=function(n){return(Tridion.Core.Configuration.CorePath+n).replace(/\/{2,}/g,"/")};
Tridion.Type.registerNamespace("Tridion.Constants");Tridion.Constants.Keys={BACKSPACE:8,ALT:18,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGEDOWN:34,PAGEUP:33,RIGHT:39,SPACE:32,TAB:9,UP:38,A:65,C:67,V:86,X:88,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};Tridion.Constants.Namespaces={list:"http://www.sdltridion.com/2009/GUI/extensions/List",tcm:"http://www.tridion.com/ContentManager/5.0",tcmXhtml:"http://www.tridion.com/ContentManager/5.2/tcmXhtml",fa:"http://www.tridion.com/ContentManager/5.2/FormatArea",xsl:"http://www.w3.org/1999/XSL/Transform",tsc:"http://www.tridion.com/EWCM/5.1/SpellCheck",tree:"http://www.sdltridion.com/2009/GUI/extensions/Tree",xlink:"http://www.w3.org/1999/xlink",edt:"http://www.sdltridion.com/2009/GUI/Configuration/Merge",bundle:"http://www.sdltridion.com/ContentManager/Bundle",r6:"http://www.sdltridion.com/ContentManager/R6",d3p1:"http://schemas.microsoft.com/2003/10/Serialization/Arrays",d5p1:"http://schemas.microsoft.com/2003/10/Serialization/Arrays",xsd:"http://www.w3.org/2001/XMLSchema"};Tridion.Constants.Orientation={VERTICAL:1,HORIZONTAL:2};Tridion.Constants.ErrorCodes={ITEM_IS_IN_USE:"8004032D",ACCESS_IS_DENIED:"80040242",ITEM_DOES_NOT_EXIST:"8004032A"};Tridion.Constants.UploadContentType={FILE:0,TEXT:1};
Tridion.Type.registerNamespace("Tridion.Utils");Tridion.Utils.Event=function(n){return Tridion.Utils.Event.getEvent(n)};Tridion.Utils.Event.getEvent=function(n){return n?n:window.event};Tridion.Utils.Event.srcElement=Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Utils.Event.srcElement","8.2","event.target",function(n){return n.target});Tridion.Utils.Event.isLeftButton=function(n){return n=Tridion.Utils.Event.getEvent(n),n.button==0};Tridion.Utils.Event.cancel=function(n){try{Tridion.Utils.Event.stopPropagation(n);Tridion.Utils.Event.preventDefault(n)}catch(t){}return!1};Tridion.Utils.Event.stopPropagation=function(n){n=Tridion.Utils.Event.getEvent(n);n.stopPropagation?n.stopPropagation():n.cancelBubble=!0};Tridion.Utils.Event.preventDefault=function(n){n=Tridion.Utils.Event.getEvent(n);n.preventDefault?n.preventDefault():n.returnValue=!1};Tridion.Utils.Event.getMouseCoordinates=function(n,t){var r;n=Tridion.Utils.Event.getEvent(n);for(var o=0,s=0,c=n.target,h=c.ownerDocument,i=h.parentWindow||h.defaultView;i!=t&&i.parent!=i;)try{r=i.frameElement;r!=null&&(o+=Tridion.Utils.Dom.offsetLeft(r),s+=Tridion.Utils.Dom.offsetTop(r));i=i.parent}catch(v){break}var e={},u=document.body,f=document.documentElement,l=(f?f.scrollLeft:0)||(u?u.scrollLeft:0),a=(f?f.scrollTop:0)||(u?u.scrollTop:0);return e.x=n.clientX+o+(window.pageXOffset||l),e.y=n.clientY+s+(window.pageYOffset||a),e};Tridion.Utils.Event.ctrlKey=function(n){n=Tridion.Utils.Event.getEvent(n);var t=!1;return Tridion.Utils.Dom.isMacintosh?n.metaKey&&!n.ctrlKey&&(t=!0):n.ctrlKey&&(t=!0),t};Tridion.Utils.Event.isContextMenu=function(n){n=Tridion.Utils.Event.getEvent(n);var t=!1;return n.type==="contextmenu"&&(t=!0),t};
Tridion.Type.registerNamespace("Tridion.Utils.TextRange");Tridion.Utils.TextRange.createTextRange=function(n,t){if(n)if(t!=!1&&n.normalize(),n.createTextRange)return n.createTextRange();else{if(n.nodeType==1)switch($dom.getTagName(n)){case"input":case"textarea":return new Tridion.Utils.TextRange.InputTextRange(n);default:break}var i;return n.parentTextEdit&&n.parentTextEdit.createTextRange?i=n.parentTextEdit.createTextRange():n.ownerDocument&&n.ownerDocument.createRange&&(i=n.ownerDocument.createRange()),i.selectNode?i.selectNodeContents(n):i.moveToElementText(n),i}};Tridion.Utils.TextRange.findText=function(n,t){var i,u,s,l,c,h;if(n&&t)if(n.findText)return i=n.findText(t,0,6),i&&$dom.selectRange(n),i;else{for(var r=n.startContainer,f=n.startOffset,e=n.endContainer,o=n.endOffset,i=Tridion.Utils.TextRange.findTextInDom(r,f,e,o,t);i===undefined;)if(u=r.nextSibling,u)r=u,i=Tridion.Utils.TextRange.findTextInDom(r,0,e,o,t);else{for(u=r.parentNode,f=1,s=u.firstChild;s!=r;)f++,s=s.nextSibling;u==e&&f>=o?i=!1:(r=u,i=Tridion.Utils.TextRange.findTextInDom(r,f,e,o,t))}if(i){n.setStart(i.startContainer,i.startOffset);n.setEnd(i.endContainer,i.endOffset);c=i.startContainer;c&&c.nodeType==1&&(l=$dom.getTagName(i.startContainer));switch(l){case"input":case"textarea":n.select();break;default:n.collapse(!0);h=i.startContainer.ownerDocument;$dom.selectRange(n,$dom.getSelection(h));h.defaultView.find(t,!0,!1,!1,!1,!1,!1);n.setEnd(i.endContainer,i.endOffset);$dom.selectRange(n,$dom.getSelection(h))}return!0}return!1}};Tridion.Utils.TextRange.findTextInDom=function(n,t,i,r,u){var e,s,c,f,h,o,l;if(n.nodeType==3)e=$dom.getInnerText(n);else if(n.nodeType==1)switch($dom.getTagName(n)){case"input":n.type=="text"&&(e=n.value);break;case"textarea":e=n.value;break;default:for(s=n.firstChild;s&&(n!=i||r-->0);){if(--t<0&&(c=Tridion.Utils.TextRange.findTextInDom(s,0,i,r,u),c!==undefined))return c;s=s.nextSibling}break}if(e)for(f=e.indexOf(u,t);f>-1;)if(h=!0,f!=0&&(o=new RegExp("\\b"+u.slice(0,1).replace(/([\^\$\*\+\(\)\.\:\=\?\{\}\[\]\|\\])/,"\\$1")+"$"),h=o.test(e.substr(f-1,2))||o.test("a"+e.substr(f,1))),h&&f+u.length<e.length&&(o=new RegExp("^"+u.slice(-1).replace(/([\^\$\*\+\(\)\.\:\=\?\{\}\[\]\|\\])/,"\\$1")+"\\b"),h=o.test(e.substr(f-1+u.length,2))||o.test(e.substr(f-1+u.length,1)+"a")),h)return l=f+u.length,n!=i||l<=r?{startContainer:n,startOffset:f,endContainer:n,endOffset:l}:!1;else f=e.indexOf(u,f+1);if(n==i)return!1};Tridion.Utils.TextRange.setRangeText=function(n,t,i,r){var u,f,e,o;n&&(n.setText?(n.setText(t||""),i&&(r&&n.collapse(!1),n.select())):n.startContainer?(u=n.startContainer.ownerDocument,f=u.defaultView,f.focus(),n.deleteContents(),e=n.startContainer.ownerDocument.createTextNode($dom.escape(t)),n.insertNode(e),n.selectNode(e),i&&(o=n.cloneRange(),o.collapse(!0),$dom.selectRange(o,$dom.getSelection(u)),f.find&&f.find(t,!0,!1,!0,!1,!1,!1),r&&(n.collapse(!1),$dom.selectRange(n,$dom.getSelection(u))))):(n.text=t,r||n.moveStart("character",-t.length),i&&$dom.selectRange(n)))};Tridion.Utils.TextRange.InputTextRange=function(n){this.startContainer=this.endContainer=this.commonAncestorContainer=n;this.startOffset=0;this.endOffset=n.value.length};Tridion.Utils.TextRange.InputTextRange.prototype.setStart=function(n,t){this.startOffset=t};Tridion.Utils.TextRange.InputTextRange.prototype.setEnd=function(n,t){this.endOffset=t};Tridion.Utils.TextRange.InputTextRange.prototype.collapse=function(n){n?this.endOffset=this.startOffset:this.startOffset=this.endOffset};Tridion.Utils.TextRange.InputTextRange.prototype.select=function(n){var t=this.startContainer;if(t.setSelectionRange)try{t.setSelectionRange(this.startOffset,this.endOffset)}catch(i){}};Tridion.Utils.TextRange.InputTextRange.prototype.setText=function(n){var t=this.startContainer,i=t.scrollTop,r=t.scrollLeft;t.value=t.value.slice(0,this.startOffset)+n+t.value.slice(this.endOffset);this.endOffset=this.startOffset+n.length;i!=t.scrollTop&&(t.scrollTop=i);r!=t.scrollLeft&&(t.scrollLeft=r)};

Tridion.Type.registerNamespace("Tridion.TranslationManager.Constants");Tridion.TranslationManager.Constants.EditorName="Tridion.TranslationManager.UI.Editor";Tridion.TranslationManager.Constants.ResourceBundleName="Tridion.TranslationManager.Strings";Tridion.TranslationManager.Constants.AuthorizationStatus={REJECT:-1,NOTNOW:0,AUTHORIZE:1};Tridion.TranslationManager.Constants.PreviewStagingTypes={EMPTY_PUBLICATION:"tcm:0-0-0",NO_PREVIEW:"dont-use",USE_CURRENT:"use-current",USE_CHILD:"use-child"};var $tmconst=Tridion.TranslationManager.Constants;
Tridion.Type.registerNamespace("Tridion.Core");Tridion.Core.ObjectWithTimeoutManagement=function(){Tridion.OO.enableInterface(this,"Tridion.Core.ObjectWithTimeoutManagement");this.addInterface("Tridion.DisposableObject");this.properties.storedTimeouts={};this.properties.storedIntervals={}};Tridion.Core.ObjectWithTimeoutManagement.prototype.setTimeout=function(n,t){var r=this.properties.storedTimeouts,u=function(){n();delete r[i]},i=window.setTimeout(u,t);return r[i]=i,i};Tridion.Core.ObjectWithTimeoutManagement.prototype.clearTimeout=function(n){delete this.properties.storedTimeouts[n];window.clearTimeout(n)};Tridion.Core.ObjectWithTimeoutManagement.prototype.clearTimeouts=function(){for(var n in this.properties.storedTimeouts)this.clearTimeout(n)};Tridion.Core.ObjectWithTimeoutManagement.prototype.setInterval=function(n,t){var i=window.setInterval(n,t);return this.properties.storedIntervals[i]=i,i};Tridion.Core.ObjectWithTimeoutManagement.prototype.clearInterval=function(n){delete this.properties.storedIntervals[n];window.clearInterval(n)};Tridion.Core.ObjectWithTimeoutManagement.prototype.clearIntervals=function(){for(var n in this.properties.storedIntervals)this.clearInterval(n)};Tridion.Core.ObjectWithTimeoutManagement.prototype.disposeInterface=Tridion.OO.nonInheritable(function(){var n=this.getMainInterface();n.clearTimeouts();n.clearIntervals()});

Tridion.Type.registerNamespace("Tridion.Utils");Tridion.Utils.Url=function(n){Tridion.Type.isString(n)?this.parse(n):this.parse(location.href)};Tridion.Utils.Url.prototype.init=function(){this.scriptName="";this.scriptNameFull="";this.serverName="";this.serverNameFull="";this.scriptPath="";this.scriptPathFull="";this.serverPort="";this.protocol="";this.query="";this.hash="";this.hashParam={};this.queryParam={}};Tridion.Utils.Url.prototype.getProtocol=function(){return this.protocol};Tridion.Utils.Url.prototype.getQueryParam=function(n){return this.queryParam[n]};Tridion.Utils.Url.prototype.getHashParam=function(n){return this.hashParam[n]};Tridion.Utils.Url.prototype.getHashString=function(n){return this.serializeParams(this.hashParam,"#",!1)};Tridion.Utils.Url.prototype.setQueryParam=function(n,t){this.queryParam[n]=t};Tridion.Utils.Url.prototype.setHashParam=function(n,t){if(t!=undefined)return this.hashParam[n]=t;else delete this.hashParam[n]};Tridion.Utils.Url.prototype.removeQueryParam=function(n){delete this.queryParam[n]};Tridion.Utils.Url.prototype.removeHashParam=function(n){delete this.hashParam[n]};Tridion.Utils.Url.prototype.parse=function(n){n!=null&&(this.init(),String(n).match(/^(((https?|ftp):\/\/([^\/:]+)(?::(\d+))?)?([^#\?]+))?(?:\?([^#]*))?(?:\#(.*))?$/)?(this.scriptNameFull=RegExp.$6,this.scriptName=RegExp.$6,this.serverName=RegExp.$4,this.serverPort=RegExp.$5,this.serverNameFull=RegExp.$2,this.scriptPath="/",this.protocol=RegExp.$3,this.query=RegExp.$7,this.hash=RegExp.$8,this.scriptNameFull.match(/^(.*\/)([^\/]+)$/)&&(this.scriptPath=RegExp.$1,this.scriptName=RegExp.$2),this.scriptPathFull=this.serverNameFull+this.scriptPath):this.scriptNameFull=String(n),this.hashParam=Tridion.Utils.Url.parseQuery(this.hash,!1),this.queryParam=Tridion.Utils.Url.parseQuery(this.query,!0))};Tridion.Utils.Url.prototype.serializeParams=function(n,t,i){var f=[],r,e,o,u;for(r in n)e=i?encodeURIComponent(r):r,o=i?encodeURIComponent(n[r]):n[r],f.push(e+"="+o);return(u=f.join("&"),t&&u.length)?Tridion.Utils.String.concat(t,u):u};Tridion.Utils.Url.prototype.toString=function(){return Tridion.Utils.String.concat(this.serverNameFull,this.scriptNameFull,this.serializeParams(this.queryParam,"?",!0),this.serializeParams(this.hashParam,"#",!1))};Tridion.Utils.Url.prototype.getFullServerName=function(){return this.serverNameFull};Tridion.Utils.Url.combine=function(n,t){for(var i=Tridion.Utils.String.concat(n,"/",t);i.match(/[^\/]+\/\.\.\//);)i=i.replace(/[^\/]+\/\.\.\//,"");return i.replace(/\/{2,}/g,"/")};Tridion.Utils.Url.getQueryParam=function(n,t){return(new Tridion.Utils.Url).getQueryParam(n)||t};Tridion.Utils.Url.getProtocol=function(n){return(new Tridion.Utils.Url).getProtocol()||n};Tridion.Utils.Url.getHashParam=function(n,t){return(new Tridion.Utils.Url).getHashParam(n)||t};Tridion.Utils.Url.setHashParam=function(n,t){var r=new Tridion.Utils.Url(location),i;r.setHashParam(n,t);i=r.toString();location!=i&&(location=i)};Tridion.Utils.Url.parseQuery=function(n,t){var e,i,u;if(n==null)return{};for(e=String(n).split("&"),i={},u=0;u<e.length;u++)if(e[u].length!=0){var o=e[u].split("="),r=o.shift(),f=o.join("=");f&&t&&(f=decodeURIComponent(f));i[r]!=null?(Tridion.Type.isArray(i[r])||(i[r]=[i[r]]),i[r].push(f)):i[r]=f}return i};Tridion.Utils.Url.getFileExtension=function(n){var t=n?n.lastIndexOf("."):-1;return t>-1?n.slice(t+1):""};Tridion.Utils.Url.getFileName=function(n){return n&&n.match(/[^\\//]*$/)[0]};Tridion.Utils.Url.isSameDomain=function(n,t){if(n&&t){var i=n.toLowerCase().match(/^(https?):\/{2}([^\/:]+)(:(\d+))?/),r=t.toLowerCase().match(/^(https?):\/{2}([^\/:]+)(:(\d+))?/);if(i&&r)return i[1]==r[1]&&i[2]==r[2]&&(i[4]==r[4]||i[4]==null&&r[4]==(r[1]=="http"?"80":"443")||r[4]==null&&i[4]==(i[1]=="http"?"80":"443"))}return!1};Tridion.Utils.Url.getDomain=function(n){if(n){var t=n.toString().match(/^https?:\/{2}[^\/:]+(:\d+)?/i);if(t)return t[0]}return!1};
Tridion.Type.registerNamespace("Tridion.Core");Tridion.Core.SimpleLocationHandler=function(n,t){var i,u;if(n){(isNaN(t)||t<100)&&(t=100);function r(){i!=window.location.href&&(i=window.location.href,n(i))}this.trigger=function(){r()};u=window.setInterval(r,t)}};

Tridion.Type.registerNamespace("Tridion.Utils");Tridion.Utils.CrossDomainMessaging={reqId:0,callbacks:null,trustedDomains:null,allowedHandlerBases:null,_messageHandler:function(n){var i=Tridion.Utils.CrossDomainMessaging,t,f,o,s;if(n&&n.data&&i.trustedDomains&&(i.trustedDomains[0]=="*"||Tridion.Utils.Array.contains(i.trustedDomains,n.origin,Tridion.Utils.Url.isSameDomain))&&(t=Tridion.Utils.Object.deserialize(n.data),t))if(t.method){var u=t.method.split("."),e=u.length-1,r=window;for(f=0;f<e&&r;f++)r=r[u[f]];r?i.allowedHandlerBases&&Tridion.Utils.Array.contains(i.allowedHandlerBases,r)?(o=Tridion.Type.isArray(t.args)?r[u[e]].apply(r,t.args):r[u[e]](),t.reqId&&i._postMessage(n.source,Tridion.Utils.Object.serialize({respId:t.reqId,result:o}),n.origin)):Tridion.Utils.Assert.raiseError("XDM: Access denied to "+t.method):Tridion.Utils.Assert.raiseError("XDM: Unable to evaluate "+t.method)}else t.respId&&i.callbacks&&t.respId in i.callbacks&&(s=i.callbacks[t.respId],delete i.callbacks[t.respId],s(t.result))},_startListening:function(n){Tridion.EventRegister.addEventHandler(window,"message",n)},_postMessage:function(n,t,i){i||(Tridion.Utils.CrossDomainMessaging.trustedDomains?i=Tridion.Utils.CrossDomainMessaging.trustedDomains.length==1?Tridion.Utils.CrossDomainMessaging.trustedDomains[0]:"*":Tridion.Utils.Assert.raiseError("XDM: Unable to send a message - there are no allowed domains defined for cross domain messaging."));n.postMessage(t,i)}};Tridion.Utils.CrossDomainMessaging.addTrustedDomain=function(n){this.trustedDomains?n=="*"?this.trustedDomains=["*"]:this.trustedDomains[0]!="*"&&this.trustedDomains.push(n):(this.trustedDomains=[n],this._startListening(this._messageHandler))};Tridion.Utils.CrossDomainMessaging.addAllowedHandlerBase=function(n){this.allowedHandlerBases?this.allowedHandlerBases.push(n):this.allowedHandlerBases=[n]};Tridion.Utils.CrossDomainMessaging.call=function(n,t,i,r){var e={method:t,args:i},u=Tridion.Utils.CrossDomainMessaging,f;r&&(f=++u.reqId,u.callbacks||(u.callbacks={}),u.callbacks[f]=r,e.reqId=f);u._postMessage(n,Tridion.Utils.Object.serialize(e))};

/*!
 * Sizzle CSS Selector Engine - v1.0
 * Copyright 2009, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 * More information: http://sizzlejs.com/
 */
void 0,function(){function l(n,t,i,r,u,f){for(var e,s,h=n=="previousSibling"&&!f,o=0,c=r.length;o<c;o++)if(e=r[o],e){for(h&&e.nodeType===1&&(e.sizcache=i,e.sizset=o),e=e[n],s=!1;e;){if(e.sizcache===i){s=r[e.sizset];break}if(e.nodeType!==1||f||(e.sizcache=i,e.sizset=o),e.nodeName===t){s=e;break}e=e[n]}r[o]=s}}function a(n,i,r,u,f,e){for(var o,h,c=n=="previousSibling"&&!e,s=0,l=u.length;s<l;s++)if(o=u[s],o){for(c&&o.nodeType===1&&(o.sizcache=r,o.sizset=s),o=o[n],h=!1;o;){if(o.sizcache===r){h=u[o.sizset];break}if(o.nodeType===1)if(e||(o.sizcache=r,o.sizset=s),typeof i!="string"){if(o===i){h=!0;break}}else if(t.filter(i,[o]).length>0){h=o;break}o=o[n]}u[s]=h}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|[\'\"][^\'\"]*[\'\"]|[^[\]\'\"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,o=0,h=Object.prototype.toString,r=!1,t=function(r,u,o,s){var it,w,k,d,p;if(o=o||[],it=u=u||document,u.nodeType!==1&&u.nodeType!==9)return[];if(!r||typeof r!="string")return o;var l=[],nt,b,a,ut,ft,tt,rt=!0,g=f(u);for(e.lastIndex=0;(nt=e.exec(r))!==null;)if(l.push(nt[1]),nt[2]){tt=RegExp.rightContext;break}if(l.length>1&&c.exec(r))if(l.length===2&&n.relative[l[0]])b=v(l[0]+l[1],u);else for(b=n.relative[l[0]]?[u]:t(l.shift(),u);l.length;)r=l.shift(),n.relative[r]&&(r+=l.shift()),b=v(r,b);else if(!s&&l.length>1&&u.nodeType===9&&!g&&n.match.ID.test(l[0])&&!n.match.ID.test(l[l.length-1])&&(w=t.find(l.shift(),u,g),u=w.expr?t.filter(w.expr,w.set)[0]:w.set[0]),u)for(w=s?{expr:l.pop(),set:i(s)}:t.find(l.pop(),l.length===1&&(l[0]==="~"||l[0]==="+")&&u.parentNode?u.parentNode:u,g),b=w.expr?t.filter(w.expr,w.set):w.set,l.length>0?a=i(b):rt=!1;l.length;)k=l.pop(),d=k,n.relative[k]?d=l.pop():k="",d==null&&(d=u),n.relative[k](a,d,g);else a=l=[];if(a||(a=b),!a)throw"Syntax error, unrecognized expression: "+(k||r);if(h.call(a)==="[object Array]")if(rt)if(u&&u.nodeType===1)for(p=0;a[p]!=null;p++)a[p]&&(a[p]===!0||a[p].nodeType===1&&y(u,a[p]))&&o.push(b[p]);else for(p=0;a[p]!=null;p++)a[p]&&a[p].nodeType===1&&o.push(b[p]);else o.push.apply(o,a);else i(a,o);return tt&&(t(tt,it,o,s),t.uniqueSort(o)),o},n,c,s,i,u;t.uniqueSort=function(n){if(u&&(r=!1,n.sort(u),r))for(var t=1;t<n.length;t++)n[t]===n[t-1]&&n.splice(t--,1)};t.matches=function(n,i){return t(n,null,null,i)};t.find=function(t,i,r){var u,e,h,o,f,s;if(!t)return[];for(e=0,h=n.order.length;e<h;e++)if(o=n.order[e],(f=n.match[o].exec(t))&&(s=RegExp.leftContext,s.substr(s.length-1)!=="\\"&&(f[1]=(f[1]||"").replace(/\\/g,""),u=n.find[o](f,i,r),u!=null))){t=t.replace(n.match[o],"");break}return u||(u=i.getElementsByTagName("*")),{set:u,expr:t}};t.filter=function(t,i,r,u){for(var p=t,c=[],e=i,o,s,b=i&&i[0]&&f(i[0]),h,w,l,v,a,y;t&&i.length;){for(h in n.filter)if((o=n.match[h].exec(t))!=null){if(w=n.filter[h],s=!1,e==c&&(c=[]),n.preFilter[h])if(o=n.preFilter[h](o,e,r,c,u,b),o){if(o===!0)continue}else s=l=!0;if(o)for(a=0;(v=e[a])!=null;a++)v&&(l=w(v,o,a,e),y=u^!!l,r&&l!=null?y?s=!0:e[a]=!1:y&&(c.push(v),s=!0));if(l!==undefined){if(r||(e=c),t=t.replace(n.match[h],""),!s)return[];break}}if(t==p)if(s==null)throw"Syntax error, unrecognized expression: "+t;else break;p=t}return e};n=t.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,NAME:/\[name=[\'\"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(n){return n.getAttribute("href")}},relative:{"+":function(n,i,r){var e=typeof i=="string",o=e&&!/\W/.test(i),s=e&&!o,f,h,u;for(o&&!r&&(i=i.toUpperCase()),f=0,h=n.length;f<h;f++)if(u=n[f]){while((u=u.previousSibling)&&u.nodeType!==1);n[f]=s||u&&u.nodeName===i?u||!1:u===i}s&&t.filter(i,n,!0)},">":function(n,i,r){var o=typeof i=="string",s,u,e,f;if(o&&!/\W/.test(i))for(i=r?i:i.toUpperCase(),u=0,e=n.length;u<e;u++)f=n[u],f&&(s=f.parentNode,n[u]=s.nodeName===i?s:!1);else{for(u=0,e=n.length;u<e;u++)f=n[u],f&&(n[u]=o?f.parentNode:f.parentNode===i);o&&t.filter(i,n,!0)}},"":function(n,t,i){var f=o++,r=a,u;t.match(/\W/)||(u=t=i?t:t.toUpperCase(),r=l);r("parentNode",t,f,n,u,i)},"~":function(n,t,i){var f=o++,r=a,u;typeof t!="string"||t.match(/\W/)||(u=t=i?t:t.toUpperCase(),r=l);r("previousSibling",t,f,n,u,i)}},find:{ID:function(n,t,i){if(typeof t.getElementById!="undefined"&&!i){var r=t.getElementById(n[1]);return r?[r]:[]}},NAME:function(n,t,i){var u,f,r,e;if(typeof t.getElementsByName!="undefined"){for(u=[],f=t.getElementsByName(n[1]),r=0,e=f.length;r<e;r++)f[r].getAttribute("name")===n[1]&&u.push(f[r]);return u.length===0?null:u}},TAG:function(n,t){return t.getElementsByTagName(n[1])}},preFilter:{CLASS:function(n,t,i,r,u,f){if(n=" "+n[1].replace(/\\/g,"")+" ",f)return n;for(var o=0,e;(e=t[o])!=null;o++)e&&(u^(e.className&&(" "+e.className+" ").indexOf(n)>=0)?i||r.push(e):i&&(t[o]=!1));return!1},ID:function(n){return n[1].replace(/\\/g,"")},TAG:function(n,t){for(var i=0;t[i]===!1;i++);return t[i]&&f(t[i])?n[1]:n[1].toUpperCase()},CHILD:function(n){if(n[1]=="nth"){var t=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(n[2]=="even"&&"2n"||n[2]=="odd"&&"2n+1"||!/\D/.test(n[2])&&"0n+"+n[2]||n[2]);n[2]=t[1]+(t[2]||1)-0;n[3]=t[3]-0}return n[0]=o++,n},ATTR:function(t,i,r,u,f,e){var o=t[1].replace(/\\/g,"");return!e&&n.attrMap[o]&&(t[1]=n.attrMap[o]),t[2]==="~="&&(t[4]=" "+t[4]+" "),t},PSEUDO:function(i,r,u,f,o){if(i[1]==="not")if(i[3].match(e).length>1||/^\w/.test(i[3]))i[3]=t(i[3],null,null,r);else{var s=t.filter(i[3],r,u,!0^o);return u||f.push.apply(f,s),!1}else if(n.match.POS.test(i[0])||n.match.CHILD.test(i[0]))return!0;return i},POS:function(n){return n.unshift(!0),n}},filters:{enabled:function(n){return n.disabled===!1&&n.type!=="hidden"},disabled:function(n){return n.disabled===!0},checked:function(n){return n.checked===!0},selected:function(n){return n.parentNode.selectedIndex,n.selected===!0},parent:function(n){return!!n.firstChild},empty:function(n){return!n.firstChild},has:function(n,i,r){return!!t(r[3],n).length},header:function(n){return/h\d/i.test(n.nodeName)},text:function(n){return"text"===n.type},radio:function(n){return"radio"===n.type},checkbox:function(n){return"checkbox"===n.type},file:function(n){return"file"===n.type},password:function(n){return"password"===n.type},submit:function(n){return"submit"===n.type},image:function(n){return"image"===n.type},reset:function(n){return"reset"===n.type},button:function(n){return"button"===n.type||n.nodeName.toUpperCase()==="BUTTON"},input:function(n){return/input|select|textarea|button/i.test(n.nodeName)}},setFilters:{first:function(n,t){return t===0},last:function(n,t,i,r){return t===r.length-1},even:function(n,t){return t%2==0},odd:function(n,t){return t%2==1},lt:function(n,t,i){return t<i[3]-0},gt:function(n,t,i){return t>i[3]-0},nth:function(n,t,i){return i[3]-0==t},eq:function(n,t,i){return i[3]-0==t}},filter:{PSEUDO:function(t,i,r,u){var f=i[1],o=n.filters[f],e,r,s;if(o)return o(t,r,i,u);else if(f==="contains")return(t.textContent||t.innerText||"").indexOf(i[3])>=0;else if(f==="not"){for(e=i[3],r=0,s=e.length;r<s;r++)if(e[r]===t)return!1;return!0}},CHILD:function(n,t){var s=t[1],i=n,r,e,o,u,h,f;switch(s){case"only":case"first":while(i=i.previousSibling)if(i.nodeType===1)return!1;if(s=="first")return!0;i=n;case"last":while(i=i.nextSibling)if(i.nodeType===1)return!1;return!0;case"nth":if(r=t[2],e=t[3],r==1&&e==0)return!0;if(o=t[0],u=n.parentNode,u&&(u.sizcache!==o||!n.nodeIndex)){for(h=0,i=u.firstChild;i;i=i.nextSibling)i.nodeType===1&&(i.nodeIndex=++h);u.sizcache=o}return f=n.nodeIndex-e,r==0?f==0:f%r==0&&f/r>=0}},ID:function(n,t){return n.nodeType===1&&n.getAttribute("id")===t},TAG:function(n,t){return t==="*"&&n.nodeType===1||n.nodeName===t},CLASS:function(n,t){return(" "+(n.className||n.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(t,i){var e=i[1],o=n.attrHandle[e]?n.attrHandle[e](t):t[e]!=null?t[e]:t.getAttribute(e),u=o+"",f=i[2],r=i[4];return o==null?f==="!=":f==="="?u===r:f==="*="?u.indexOf(r)>=0:f==="~="?(" "+u+" ").indexOf(r)>=0:r?f==="!="?u!=r:f==="^="?u.indexOf(r)===0:f==="$="?u.substr(u.length-r.length)===r:f==="|="?u===r||u.substr(0,r.length+1)===r+"-":!1:u&&o!==!1},POS:function(t,i,r,u){var e=i[2],f=n.setFilters[e];if(f)return f(t,r,i,u)}}};c=n.match.POS;for(s in n.match)n.match[s]=new RegExp(n.match[s].source+/(?![^\[]*\])(?![^\(]*\))/.source);i=function(n,t){return(n=Array.prototype.slice.call(n),t)?(t.push.apply(t,n),t):n};try{Array.prototype.slice.call(document.documentElement.childNodes)}catch(p){i=function(n,t){var r=t||[],u,i;if(h.call(n)==="[object Array]")Array.prototype.push.apply(r,n);else if(typeof n.length=="number")for(i=0,u=n.length;i<u;i++)r.push(n[i]);else for(i=0;n[i];i++)r.push(n[i]);return r}}document.documentElement.compareDocumentPosition?u=function(n,t){var i=n.compareDocumentPosition(t)&4?-1:n===t?0:1;return i===0&&(r=!0),i}:"sourceIndex"in document.documentElement?u=function(n,t){var i=n.sourceIndex-t.sourceIndex;return i===0&&(r=!0),i}:document.createRange&&(u=function(n,t){var i=n.ownerDocument.createRange(),u=t.ownerDocument.createRange(),f;return i.selectNode(n),i.collapse(!0),u.selectNode(t),u.collapse(!0),f=i.compareBoundaryPoints(Range.START_TO_END,u),f===0&&(r=!0),f}),function(){var i=document.createElement("div"),r="script"+(new Date).getTime(),t;i.innerHTML="<a name='"+r+"'/>";t=document.documentElement;t.insertBefore(i,t.firstChild);!document.getElementById(r)||(n.find.ID=function(n,t,i){if(typeof t.getElementById!="undefined"&&!i){var r=t.getElementById(n[1]);return r?r.id===n[1]||typeof r.getAttributeNode!="undefined"&&r.getAttributeNode("id").nodeValue===n[1]?[r]:undefined:[]}},n.filter.ID=function(n,t){var i=typeof n.getAttributeNode!="undefined"&&n.getAttributeNode("id");return n.nodeType===1&&i&&i.nodeValue===t});t.removeChild(i)}(),function(){var t=document.createElement("div");t.appendChild(document.createComment(""));t.getElementsByTagName("*").length>0&&(n.find.TAG=function(n,t){var i=t.getElementsByTagName(n[1]),u,r;if(n[1]==="*"){for(u=[],r=0;i[r];r++)i[r].nodeType===1&&u.push(i[r]);i=u}return i});t.innerHTML="<a href='#'><\/a>";t.firstChild&&typeof t.firstChild.getAttribute!="undefined"&&t.firstChild.getAttribute("href")!=="#"&&(n.attrHandle.href=function(n){return n.getAttribute("href",2)})}();document.querySelectorAll&&function(){var n=t,r=document.createElement("div"),u;if(r.innerHTML="<p class='TEST'><\/p>",!r.querySelectorAll||r.querySelectorAll(".TEST").length!==0){t=function(t,r,u,e){if(r=r||document,!e&&r.nodeType===9&&!f(r))try{return i(r.querySelectorAll(t),u)}catch(o){}return n(t,r,u,e)};for(u in n)t[u]=n[u]}}();document.getElementsByClassName&&document.documentElement.getElementsByClassName&&function(){var t=document.createElement("div");(t.innerHTML="<div class='test e'><\/div><div class='test'><\/div>",t.getElementsByClassName("e").length!==0)&&(t.lastChild.className="e",t.getElementsByClassName("e").length!==1)&&(n.order.splice(1,0,"CLASS"),n.find.CLASS=function(n,t,i){if(typeof t.getElementsByClassName!="undefined"&&!i)return t.getElementsByClassName(n[1])})}();var y=document.compareDocumentPosition?function(n,t){return n.compareDocumentPosition(t)&16}:function(n,t){return n!==t&&(n.contains?n.contains(t):!0)},f=function(n){return n.nodeType===9&&n.documentElement.nodeName!=="HTML"||!!n.ownerDocument&&n.ownerDocument.documentElement.nodeName!=="HTML"},v=function(i,r){for(var f=[],e="",o,s=r.nodeType?[r]:r,u,h;o=n.match.PSEUDO.exec(i);)e+=o[0],i=i.replace(n.match.PSEUDO,"");for(i=n.relative[i]?i+"*":i,u=0,h=s.length;u<h;u++)t(i,s[u],f);return t.filter(e,f)};Tridion.Sizzle=t}();Tridion.$$=function(n,t,i){return Tridion.Sizzle(n,t||document,i)};Tridion.$=function(n,t,i){return Tridion.$$(n,t,i)[0]};

Tridion.Type.registerNamespace("Tridion.Web.UI.Editors.XPMCore.Controls");Tridion.Web.UI.Editors.XPMCore.Controls.JsStyledControl=function(n){Tridion.OO.enableInterface(this,"Tridion.Web.UI.Editors.XPMCore.Controls.JsStyledControl");var t=this.properties;t.element=n;t.stylesObject};Tridion.Web.UI.Editors.XPMCore.Controls.JsStyledControl.prototype.getElement=function(){return this.properties.element};Tridion.Web.UI.Editors.XPMCore.Controls.JsStyledControl.prototype.addStyle=function(n,t,i){var i,u,r,f,e;n&&(i=i||this.getElement(),i&&(r=i.getAttribute("data-class"),r?(f=new RegExp("(^|\\s)"+n+"(\\s|$)"),u=!f.test(r)):u=!0,u&&(e=r?r+" "+n:n,i.setAttribute("data-class",e)),t||this._applyStyles()))};Tridion.Web.UI.Editors.XPMCore.Controls.JsStyledControl.prototype.removeStyle=function(n,t,i){var i;if(n&&(i=i||this.getElement(),i)){var r=i.getAttribute("data-class")||"",f=new RegExp("(^|\\s)"+n+"(?=($|\\s))","g"),u=r.replace(f,"");u.length!=r.length&&i.setAttribute("data-class",u.replace(/^\s+/,""));t||this._applyStyles()}};Tridion.Web.UI.Editors.XPMCore.Controls.JsStyledControl.prototype._applyStyles=function(){var i=this.getElement(),n,r,t,u;if(i&&(n=i.getAttribute("data-class"),n)){r=this.properties.stylesObject||{};n=r[n];for(t in n)t=="element"?i.style.cssText+=";"+n[t]:(u=new RegExp("element\\s+"),Tridion.$(t.replace(u,""),i).style.cssText+=";"+n[t])}};
Tridion.Web.UI.Core.Utils.Deprecation.deprecateTridionInterface("Tridion.Controls.JsStyledControl","8","Tridion.Web.UI.Editors.XPMCore.Controls.JsStyledControl");
Tridion.Type.registerNamespace("Tridion");Tridion.InitializableObject=function(){Tridion.OO.enableInterface(this,"Tridion.InitializableObject");var n=this.properties;n.initialized=!1;n.initializing=!1};Tridion.InitializableObject.prototype.initialize=function(){var n=this.properties;n.initialized||n.initializing||(n.initializing=!0,this._initialize(),n.initialized=!0,n.initializing=!1)};Tridion.InitializableObject.prototype._initialize=function(){};Tridion.InitializableObject.prototype.isInitialized=function(){return this.properties.initialized};Tridion.InitializableObject.prototype.isInitializing=function(){return this.properties.initializing};

Tridion.Type.registerNamespace("Tridion.Web.UI.Editors.XPMCore.Controls");Tridion.Web.UI.Editors.XPMCore.Controls.LoadingIndicator=function(){Tridion.OO.enableInterface(this,"Tridion.Web.UI.Editors.XPMCore.Controls.LoadingIndicator");this.addInterface("Tridion.Web.UI.Editors.XPMCore.Controls.JsStyledControl");this.addInterface("Tridion.InitializableObject");var n=this.properties;n.animated=!1;n.rotationsPerSecond=1.5;n.fps=30;n.angle=0;n.intervalRef=null;n.stylesObject=Tridion.Web.UI.Editors.XPMCore.Controls.LoadingIndicator.Styles};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingIndicator.prototype._initialize=function(){this.properties.element=document.createElement("div");this.addStyle("loadingindicator")};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingIndicator.prototype.rotate=function(){var n=this.properties,i=360*n.rotationsPerSecond/n.fps,t;n.angle=(n.angle+i)%360;t=n.element.style;t.WebkitTransform=t.MozTransform=t.msTransform=t.transform="rotate("+n.angle+"deg)"};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingIndicator.prototype.startAnimation=function(){var n=this.properties;if(this.isInitialized()&&!n.animated){var t=this,i=function(){t.rotate()},r=1e3/n.fps;n.intervalRef=setInterval(i,r);n.animated=!0}};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingIndicator.prototype.stopAnimation=function(){var n=this.properties;this.isInitialized()&&n.animated&&(clearInterval(n.intervalRef),n.animated=!1)};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingIndicator.prototype.isAnimated=function(){return this.properties.animated};
Tridion.Web.UI.Editors.XPMCore.Controls.LoadingIndicator.Styles={loadingindicator:{},"loadingindicator ie":{}};
Tridion.Web.UI.Editors.XPMCore.Controls.LoadingIndicator.Styles.loadingindicator={element:"position: absolute; top: 4px; left:4px; height: 16px; width: 16px; background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATdJREFUeNqMk7FKQ0EQRTdrxCoBizRKtA2KioiCYi+2wQ9QsfIrrPwP+8Qy+AMhoIhgEG0sosQmEAnaBEPWO3AXLiE+d+DAvHk7d3dmZ3MhBDdh86ACyqDA2Bd4By/gUxfnRMCDXbBicTfdAkVaYKQClnwIFl2afYAGGEeBfe4crQPaoMfvElgHS7LmCTRNwGo+kmPfgYc/dt4E21JOzbNhMfktI9nxXyf2z3I9ux3tMaH+tvhlEyhKoJcgoGuK1oNXODMMbIDBPwKz4IT+j59Q3Es4QUn8bxO4lcBZgsCa+F0TuOKVmG2Bi4xku8ZlnUoTuAc3sugY1DmZ9hbyYAEcyAyYPYN+nMQ5cA1Wp+x6mTXKnoEhqDIYMkoI3NlOPHY8nhORc9Z5CnbY8RGfc5cvsa+KvwIMAA2QU5M4RKFTAAAAAElFTkSuQmCC')"};
Tridion.Web.UI.Core.Utils.Deprecation.deprecateTridionInterface("Tridion.Web.UI.Editors.SiteEdit.Controls.LoadingIndicator","8","Tridion.Web.UI.Editors.XPMCore.Controls.LoadingIndicator");
Tridion.Web.UI.Core.Utils.Compatibility.createCompatibilityObject("Tridion.Web.UI.Editors.SiteEdit.Controls.LoadingIndicator.Styles","8","Tridion.Web.UI.Editors.XPMCore.Controls.LoadingIndicator.Styles");
Tridion.Type.registerNamespace("Tridion.Web.UI.Editors.XPMCore.Controls");Tridion.Web.UI.Editors.XPMCore.Controls.Button=function(n){Tridion.OO.enableInterface(this,"Tridion.Web.UI.Editors.XPMCore.Controls.Button");this.addInterface("Tridion.ControlBase",[n]);this.addInterface("Tridion.Web.UI.Editors.XPMCore.Controls.JsStyledControl",[n]);var t=this.properties;t.labelElement=Tridion.$("> span",n);t.stylesObject=Tridion.Web.UI.Editors.XPMCore.Controls.Button.Styles;t.loadingIndicator;this.addStyle("button");t.commandName=n.getAttribute("c:command");Tridion.Utils.Dom.disableTextSelection(n)};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.initialize=function(){var n=this.properties.element;Tridion.EventRegister.addEventHandler(n,"mouseover",this.getDelegate(this.onmouseover));Tridion.EventRegister.addEventHandler(n,"mouseout",this.getDelegate(this.onmouseout));Tridion.EventRegister.addEventHandler(n,"mousedown",this.getDelegate(this.onmousedown));Tridion.EventRegister.addEventHandler(n,"mouseup",this.getDelegate(this.onmouseup));Tridion.EventRegister.addEventHandler(n,"keydown",this.getDelegate(this.onkeydown));Tridion.EventRegister.addEventHandler(n,"keyup",this.getDelegate(this.onkeyup));Tridion.EventRegister.addEventHandler(n,"keypress",this.getDelegate(this.onkeypress));Tridion.EventRegister.addEventHandler(n,"blur",this.getDelegate(this.onblur));Tridion.EventRegister.addEventHandler(n,"focus",this.getDelegate(this.onfocus))};Tridion.Web.UI.Editors.XPMCore.Controls.Button.createElement=function(n,t){t||(t=document);var i=t.createElement("div"),r="<span>{0}<\/span>";return n&&n.hasImageDiv&&(r='<div data-class="image"><\/div>'+r),i.innerHTML=Tridion.Utils.String.format(r,n&&n.text),n&&n.title&&(i.title=n.title),n&&(Tridion.Utils.String.isNullOrEmpty(n.id)||(i.id=n.id),n.command&&i.setAttribute("c:command",n.command)),i};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.disable=function(){var n=this.properties,t,i;n.disabled||(n.disabled=!0,t=n.element,i=n.labelElement,t.removeAttribute("tabIndex"),this.removeStyle("mouseover",!0),this.removeStyle("mousedown",!0),this.addStyle("disabled"))};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.enable=function(){var n=this.properties,t,i;n.disabled&&(n.disabled=!1,t=n.element,i=n.labelElement,n.tabIndex!=-1&&t.setAttribute("tabIndex",n.tabIndex),this.removeStyle("disabled"))};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.hide=function(){var n=this.properties,t=Tridion.Utils.Css(n.element,"display");t!="none"&&(n.hidden=!0,Tridion.Utils.Css.undisplay(n.element),this.fireEvent("hide"))};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.show=function(){var n=this.properties,t=Tridion.Utils.Css(n.element,"display");(t==undefined||t=="none")&&(n.hidden=!1,Tridion.Utils.Css.display(n.element),this.fireEvent("show"))};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.visible=function(n){var t=this.properties,i=Tridion.Utils.Css(t.element,"visibility");if(n===undefined)return i=="visible"?!0:!1;else n===!0?i=="hidden"&&(Tridion.Utils.Css.show(t.element),this.fireEvent("show")):i!="hidden"&&(Tridion.Utils.Css.hide(t.element),this.fireEvent("hide"))};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.getTooltip=function(){return this.properties.element.title};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.getText=function(){return Tridion.Utils.Dom.getInnerText(this.properties.labelElement)};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.getCommandName=function(){return this.properties.commandName};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.setCommandName=function(n){this.properties.commandName=n};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.setTabIndex=function(n){this.properties.tabIndex=n;this.properties.element.tabIndex=n};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.setTooltip=function(n){this.properties.element.title=n};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.setText=function(n){return Tridion.Utils.Dom.setInnerText(this.properties.labelElement,n)};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.isDisabled=function(){return this.properties.disabled};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.onmouseover=function(n){this.isDisabled()||(this.properties.mouseover=!0,this.addStyle("mouseover"),this.fireEvent("mouseover"))};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.onmouseout=function(n){if(!this.isDisabled()){var t=this.properties;t.mouseover=!1;t.down=!1;this.removeStyle("mouseover",!0);this.removeStyle("mousedown");this.fireEvent("mouseout")}};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.onmousedown=function(n){this.isDisabled()||(n.which&&n.which==1||!n.which&&n.button&&n.button==1)&&(this.properties.down=!0,this.press(),this.fireEvent("mousedown"))};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.onmouseup=function(n){if(!this.isDisabled()&&this.properties.down){this.properties.down=!1;this.depress();this.fireEvent("mouseup");this.onclick(n)}};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.onkeydown=function(n){if(!this.isDisabled()){if(!this.isValidKey(Tridion.Utils.Event.getEvent(n).keyCode))return;this.properties.down=!0;this.press();this.fireEvent("keydown");this.onclick(n)}};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.onkeyup=function(n){if(!this.isDisabled()&&this.properties.down){if(!this.isValidKey(Tridion.Utils.Event.getEvent(n).keyCode))return;this.properties.down=!1;this.depress();this.fireEvent("keyup")}};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.onkeypress=function(n){if(!this.isDisabled()){if(!this.isValidKey(Tridion.Utils.Event.getEvent(n).keyCode))return;this.fireEvent("keypress")}};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.isValidKey=function(n){return n==Tridion.Constants.Keys.ENTER||n==Tridion.Constants.Keys.SPACE};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.onclick=function(n){this.isDisabled()||this.fireEvent("click")};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.onfocus=function(n){this.fireEvent("focus")};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.onblur=function(n){this.isDisabled()||(this.removeStyle("mousedown",!0),this.removeStyle("mouseover"),this.fireEvent("blur"))};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.press=function(){this.removeStyle("mouseover",!0);this.addStyle("mousedown");this.fireEvent("press")};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.depress=function(){var n=this.properties;this.removeStyle("mousedown",!0);n.mouseover&&this.addStyle("mouseover");this.fireEvent("depress")};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.showLoadingIndicator=function(){var n=this.properties;n.isLoading||(n.isLoading=!0,this.disable(),this.removeStyle("disabled",!0),this.addStyle("loading"),this.startLoadingAnimation())};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.hideLoadingIndicator=function(){var n=this.properties;n.isLoading&&(n.isLoading=!1,this.stopLoadingAnimation(),this.removeStyle("loading"),this.enable())};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.startLoadingAnimation=function(){var n,t=this.properties,i;(n=t.loadingIndicator)||(n=t.loadingIndicator=new Tridion.Web.UI.Editors.XPMCore.Controls.LoadingIndicator,n.initialize());n.isAnimated()||(i=this.getElement(),i.appendChild(n.getElement()),n.startAnimation())};Tridion.Web.UI.Editors.XPMCore.Controls.Button.prototype.stopLoadingAnimation=function(){var n,i=this.properties,t;(n=i.loadingIndicator)&&n.isAnimated()&&(n.stopAnimation(),t=this.getElement(),t.removeChild(n.getElement()))};
Tridion.Web.UI.Editors.XPMCore.Controls.Button.Styles={button:{},"button mousedown":{},"button mouseover":{},"button disabled":{},"button loading":{}};
Tridion.Web.UI.Core.Utils.Deprecation.deprecateTridionInterface("Tridion.Web.UI.Editors.SiteEdit.Controls.Button","8","Tridion.Web.UI.Editors.XPMCore.Controls.Button");
Tridion.Type.registerNamespace("Tridion");Tridion.ControlRegistry={};Tridion.ControlRegistry.controls={};Tridion.ControlRegistry.staticConstructors={};Tridion.ControlRegistry.staticConstructorsCount=0;Tridion.ControlRegistry.dispose=function(){var t=Tridion.ControlRegistry.controls,i,n,r;for(i in t){n=t[i];for(r in n)n[r].dispose(),delete n[r];delete t[i]}delete Tridion.ControlRegistry.controls;delete Tridion.ControlRegistry.staticConstructors};Tridion.ControlRegistry.addStaticConstructor=function(n){!Tridion.ControlRegistry.staticConstructors||n in Tridion.ControlRegistry.staticConstructors||(Tridion.ControlRegistry.staticConstructors[n]=Tridion.ControlRegistry.getTypeConstructor(n),Tridion.ControlRegistry.staticConstructorsCount++)};Tridion.ControlRegistry.runStaticConstructors=function(n){if(Tridion.ControlRegistry.staticConstructors){Tridion.ControlRegistry.staticConstructorsCount++;function t(){Tridion.ControlRegistry.doneStaticConstructor(n)}for(var i in Tridion.ControlRegistry.staticConstructors)Tridion.ControlRegistry.staticConstructors[i].setup(t);Tridion.ControlRegistry.doneStaticConstructor(n)}};Tridion.ControlRegistry.doneStaticConstructor=function(n){--Tridion.ControlRegistry.staticConstructorsCount==0&&n()};Tridion.ControlRegistry.getTypeConstructor=function(n){Tridion.Utils.Assert.isString(n,"Control type name is expected.");var t;try{t=Tridion.Type.resolveNamespace(n)}catch(i){Tridion.Utils.Assert.raiseError('Unable to evaluate "'+n+'": '+i.description)}return t};Tridion.ControlRegistry.getControl=function(n,t,i){var e,u,f,r;if(Tridion.ControlRegistry.controls)return Tridion.Utils.Assert.isHtmlElement(n),Tridion.Utils.Assert.isString(t),e=Tridion.ControlRegistry.getTypeConstructor(t),u=Tridion.ControlRegistry.controls[t],u||(u=Tridion.ControlRegistry.controls[t]={}),f=Tridion.Utils.Dom.getUniqueID(n),r=u[f],r||(r=u[f]=new e(n,i),Tridion.Utils.Assert.implementsInterface(r,"Tridion.ControlBase"),r.initialize()),r};Tridion.ControlRegistry.createControl=function(n,t,i){var o,r;if(Tridion.ControlRegistry.controls){var f=Tridion.ControlRegistry.getTypeConstructor(n),e=f.createElement(t,i),u=Tridion.ControlRegistry.controls[n];return u||(u=Tridion.ControlRegistry.controls[n]={}),o=Tridion.Utils.Dom.getUniqueID(e),r=u[o]=new f(e,t),Tridion.Utils.Assert.implementsInterface(r,"Tridion.ControlBase"),r.initialize(),r}};Tridion.ControlRegistry.hasControl=function(n,t){if(Tridion.ControlRegistry.controls){var i=Tridion.ControlRegistry.controls[t];return i&&i[Tridion.Utils.Dom.getUniqueID(n)]&&!0||!1}};Tridion.ControlRegistry.disposeControlsForElement=function(n,t){var r,i,u,f;if(Tridion.ControlRegistry.controls)if(Tridion.Utils.Assert.isHtmlElement(n),u=Tridion.Utils.Dom.getUniqueID(n),t)r=Tridion.ControlRegistry.controls[t],i=r[u],i&&(delete r[u],i.dispose&&i.dispose());else for(f in Tridion.ControlRegistry.controls)r=Tridion.ControlRegistry.controls[f],i=r[u],i&&(delete r[u],i.dispose())};Tridion.ControlRegistry.disposeControl=function(n){var i,r,u,f,t;if(Tridion.ControlRegistry.controls&&n&&n.getElement){if(i=n.getElement(),i){r=Tridion.Utils.Dom.getUniqueID(i);u=Tridion.ControlRegistry.controls;for(f in u)if(t=Tridion.ControlRegistry.controls[f],t&&t[r]==n){delete t[r];break}}n.dispose()}};Tridion.ControlRegistry.getAllControls=function(n){if(Tridion.ControlRegistry.controls)return Tridion.Utils.Assert.isString(n),Tridion.ControlRegistry.controls[n]};

Tridion.Type.registerNamespace("Tridion.Utils");Tridion.Utils.Css=function(n,t,i){if(Tridion.Utils.Assert.isHtmlElement(n),arguments.length==1)return n.style.cssText;else if(arguments.length==2){var r=Tridion.Utils.Css.getCurrentStyle(n);if(r)return t=="opacity"?Tridion.Utils.Css.getOpacity(n):r[t]}else return t=="opacity"?(Tridion.Utils.Css.setOpacity(n,i),i):n.style[t]=i};Tridion.Utils.Css.setStyleAttribute=function(n,t,i){var r,f,u,e,o;if(n[t]===undefined){r=null;f=null;switch(t){case"styleFloat":t="cssFloat";break;case"opacity":t="filter";i="alpha(opacity="+100*i+")";break;case"textDecorationUnderline":r="underline";f=/\bunderline\b/gi;t="textDecoration";break;case"textDecorationLineThrough":r="line-through";f=/\bline-through\b/gi;t="textDecoration";break}if(r)if(u=this.getStyleAttribute(n,"textDecoration"),e=i,u)if(o=/\bnone\b/gi,u.search(o)>-1)if(e)i=u.replace(o,r);else return i;else if(u.search(f)>-1)if(e)return i;else i=u.replace(f,"");else i=u+" "+r;else if(e)i=r;else return i}return n[t]=i};Tridion.Utils.Css.getStyleAttribute=function(n,t){var i=n[t],r,u;if(i===undefined){switch(t){case"styleFloat":t="cssFloat";break;case"textDecorationUnderline":r=/\bunderline\b/gi;break;case"textDecorationLineThrough":r=/\bline-through\b/gi;break}r?(u=n.textDecoration,i=u?u.search(r)>-1:!1):i=n[t]}return i};Tridion.Utils.Css.removeStyleAttribute=function(n,t,i){var r,u=t=="textDecorationUnderline"||t=="textDecorationLineThrough";if(n.removeAttribute&&!u)try{r=n.removeAttribute(t)}catch(f){}if(r===undefined&&(this.getStyleAttribute(n,t)?(this.setStyleAttribute(n,t,""),r=!0):r=!1),r&&u&&n.textDecoration=="")try{r=n.removeAttribute("textDecoration")}catch(f){}return r&&i&&n.cssText==""&&i.removeAttribute("style"),r};Tridion.Utils.Css.hasClass=Tridion.Web.UI.Core.Utils.Deprecation.deprecateProperty("Tridion.Utils.Css.hasClass","8.2","element.classList.contains",function(n,t){return Tridion.Utils.Assert.isElement(n),Tridion.Utils.Assert.isString(t),n.classList.contains(t)});Tridion.Utils.Css.addClass=function(n){var i,t,u,r;for(Tridion.Utils.Assert.isHtmlElement(n),i=Tridion.Utils.Array.fromArguments(arguments,1).join(" ").split(" "),t=0,u=i.length;t<u;t++)r=i[t],Tridion.Utils.Assert.isString(r),n.classList.add(r)};Tridion.Utils.Css.removeClass=function(n){var i,t,u,r;for(Tridion.Utils.Assert.isHtmlElement(n),i=Tridion.Utils.Array.fromArguments(arguments,1).join(" ").split(" "),t=0,u=i.length;t<u;t++)r=i[t],Tridion.Utils.Assert.isString(r),n.classList.remove(r)};Tridion.Utils.Css.replaceClass=function(n,t,i){Tridion.Utils.Assert.isHtmlElement(n);Tridion.Utils.Assert.isString(t);Tridion.Utils.Assert.isString(i);n.classList.remove(t);n.classList.add(i)};Tridion.Utils.Css.getCurrentStyle=function(n){return Tridion.Utils.Assert.isHtmlElement(n),n.currentStyle||window.getComputedStyle(n,null)};Tridion.Utils.Css.getVMargins=function(n){return Tridion.Utils.Assert.isHtmlElement(n),(parseInt(Tridion.Utils.Css(n,"marginTop"))||0)+(parseInt(Tridion.Utils.Css(n,"marginBottom"))||0)};Tridion.Utils.Css.getHMargins=function(n){return Tridion.Utils.Assert.isHtmlElement(n),(parseInt(Tridion.Utils.Css(n,"marginLeft"))||0)+(parseInt(Tridion.Utils.Css(n,"marginRight"))||0)};Tridion.Utils.Css.getVPadding=function(n){return(parseInt(Tridion.Utils.Css(n,"paddingTop"))||0)+(parseInt(Tridion.Utils.Css(n,"paddingBottom"))||0)};Tridion.Utils.Css.getHPadding=function(n){return Tridion.Utils.Assert.isHtmlElement(n),(parseInt(Tridion.Utils.Css(n,"paddingLeft"))||0)+(parseInt(Tridion.Utils.Css(n,"paddingRight"))||0)};Tridion.Utils.Css.getVBorders=function(n){return Tridion.Utils.Assert.isHtmlElement(n),(parseInt(Tridion.Utils.Css(n,"borderTopWidth"))||0)+(parseInt(Tridion.Utils.Css(n,"borderBottomWidth"))||0)};Tridion.Utils.Css.getHBorders=function(n){return Tridion.Utils.Assert.isHtmlElement(n),(parseInt(Tridion.Utils.Css(n,"borderLeftWidth"))||0)+(parseInt(Tridion.Utils.Css(n,"borderRightWidth"))||0)};Tridion.Utils.Css.pixelLeft=function(n,t){Tridion.Utils.Assert.isHtmlElement(n);Tridion.Type.isNumber(t)&&Tridion.Utils.Css(n,"left",t+"px");var i=Tridion.Utils.Css(n,"left");return i=="left"?0:parseInt(i)};Tridion.Utils.Css.pixelRight=function(n,t){Tridion.Utils.Assert.isHtmlElement(n);Tridion.Type.isNumber(t)&&Tridion.Utils.Css(n,"right",t+"px");var i=Tridion.Utils.Css(n,"right");return i=="right"?0:parseInt(i)};Tridion.Utils.Css.pixelTop=function(n,t){Tridion.Utils.Assert.isHtmlElement(n);isNaN(parseInt(t))||Tridion.Utils.Css(n,"top",t+"px");var i=Tridion.Utils.Css(n,"top");return i=="top"?0:parseInt(i)};Tridion.Utils.Css.pixelBottom=function(n,t){Tridion.Utils.Assert.isHtmlElement(n);isNaN(parseInt(t))||Tridion.Utils.Css(n,"bottom",t+"px");var i=Tridion.Utils.Css(n,"bottom");return i=="bottom"?0:parseInt(i)};Tridion.Utils.Css.pixelWidth=function(n,t){Tridion.Utils.Assert.isHtmlElement(n);parseInt(t)>=0&&Tridion.Utils.Css(n,"width",parseInt(t)+"px");var i=Tridion.Utils.Css(n,"width");return i=="auto"?0:parseInt(i)};Tridion.Utils.Css.pixelHeight=function(n,t){Tridion.Utils.Assert.isHtmlElement(n);parseInt(t)>=0&&Tridion.Utils.Css(n,"height",parseInt(t)+"px");var i=Tridion.Utils.Css(n,"height");return i=="auto"?0:parseInt(i)};Tridion.Utils.Css.pixelCoord=function(n,t,i,r,u){Tridion.Utils.Assert.isHtmlElement(n);isNaN(parseInt(arguments[1]))||Tridion.Utils.Css(n,"left",arguments[1]+"px");isNaN(parseInt(arguments[2]))||Tridion.Utils.Css(n,"top",arguments[2]+"px");isNaN(parseInt(arguments[3]))||Tridion.Utils.Css(n,"right",arguments[3]+"px");isNaN(parseInt(arguments[4]))||Tridion.Utils.Css(n,"bottom",arguments[4]+"px");return{left:parseInt(Tridion.Utils.Css(n,"left"))||null,top:parseInt(Tridion.Utils.Css(n,"top"))||null,right:parseInt(Tridion.Utils.Css(n,"right"))||null,bottom:parseInt(Tridion.Utils.Css(n,"bottom"))||null}};Tridion.Utils.Css.display=function(){for(var t,u,n,r=Tridion.Utils.Array.fromArguments(arguments),i=0;i<r.length;i++)t=r[i],Tridion.Utils.Assert.isHtmlElement(t),n=t.tagName.toLowerCase(),u=n.match(/^(a|b|code|em|i|img|input|label|span|textarea)$/)?"inline":n=="tr"?"table-row":n=="td"?"table-cell":n=="table"?"table":"block",t.style.display=u};Tridion.Utils.Css.undisplay=function(){for(var t,i=Tridion.Utils.Array.fromArguments(arguments),n=0;n<i.length;n++)t=i[n],Tridion.Utils.Assert.isHtmlElement(t),t.style.display="none"};Tridion.Utils.Css.alpha=function(n,t){var u,i,r;if(Tridion.Utils.Assert.isHtmlElement(n),u=100,t!=null&&(t=isNaN(parseInt(t))?100:parseInt(t)),Tridion.Utils.Dom.isIE){for(i=null,r=0;r<n.filters.length;r++)n.filters[r].opacity!=null&&(i=n.filters[r],t!=null&&(i.opacity=t),u=i.opacity);i==null&&t!=null&&(n.style.filter=Tridion.Utils.String.format("alpha(opacity={0})",t))}else u=Tridion.Utils.Css(n,"opacity",t);return u};Tridion.Utils.Css.getOpacity=function(n){Tridion.Utils.Assert.isHtmlElement(n);var t=Tridion.Utils.Css.getCurrentStyle(n);return t.opacity};Tridion.Utils.Css.setOpacity=function(n,t){Tridion.Utils.Assert.isHtmlElement(n);n.style.opacity=t};Tridion.Utils.Css.show=function(n,t){for(var n,r=Tridion.Utils.Array.fromArguments(arguments,0,1),i=0;i<r.length;i++)n=r[i],Tridion.Utils.Assert.isHtmlElement(n),n.style.visibility=t==!0?"inherit":"visible"};Tridion.Utils.Css.hide=function(){for(var t,i=Tridion.Utils.Array.fromArguments(arguments),n=0;n<i.length;n++)t=i[n],Tridion.Utils.Assert.isHtmlElement(t),t.style.visibility="hidden"};Tridion.Utils.Css.addDomClasses=function(n){var i=Tridion.Utils.Dom,t="unknownBrowser",r="unknownVersion";i.isIE?(t="ie",i.isIE10?r=t+"10":i.isIE11&&(r=t+"11")):i.isGecko?t="gecko":i.isWebkit&&(t="webkit");this.addClass(n.documentElement,t,r)};Tridion.Utils.Css.convertRgbToHex=function(n){var i,t;return(Tridion.Utils.Assert.isString(n),i=n.match(/^rgb ?\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3})\)/),i&&i.length==4)?(t=new Array,t[0]=parseInt(i[1],10).toString(16).toLowerCase(),t[1]=parseInt(i[2],10).toString(16).toLowerCase(),t[2]=parseInt(i[3],10).toString(16).toLowerCase(),t[0]=t[0].length==1?"0"+t[0]:t[0],t[1]=t[1].length==1?"0"+t[1]:t[1],t[2]=t[2].length==1?"0"+t[2]:t[2],"#"+t.join("")):null};Tridion.Utils.Css.getCssRules=function(n){var t=null,r,u,o,i,e,f,s;try{t=n.rules}catch(h){}if(t)return t;else{try{t=n.cssRules}catch(h){}if(t){for(r=[],u=0,o=t.length;u<o;u++)if(i=t[u],i.selectorText&&i.selectorText.indexOf(",")>-1)for(e=i.selectorText.split(","),f=0,s=e.length;f<s;f++)r.push({selectorText:e[f].replace(/^\s+|\s+$/g,"")});else r.push(i);return r}}};Tridion.Utils.Css.processStyleSheets=function(n,t,i,r,u,f){var v,rt,e,y,o,p,ut,s,d,w,ft,g,nt,b,et,tt,c,l,it,k,ot,h,a;if(!n&&f&&(n=f.styleSheets),n)for(r||(r={}),i||(i={}),v=0,rt=n.length;v<rt;v++)if(e=n[v],(!e.href||!(e.href in r)&&(!u||Tridion.FormatAreaUtils.areHrefsEqual(e.href,u,f.location)))&&(r[e.href]=e,y=this.getCssRules(e),y)){o=e.imports;try{o&&o.length!=0||(o=[])}catch(st){o=[]}for(p=0,ut=y.length;p<ut;p++)if(s=y[p],s.selectorText){for(d=s.selectorText.split(","),w=0,ft=d.length;w<ft;w++)if(g=Tridion.Utils.String.trim(d[w]),g)for(nt=g.replace(/\[[^\]]*]/g,"").match(/[^\s\>\+~]+/g),b=0,et=nt.length;b<et;b++)if(tt=nt[b].split("|"),c=tt[tt.length>1?1:0].match(/^([^\.]*)\.([^\:\#]+)/),c&&c.length>2)for(l=c[1].toLowerCase(),it=c[2].split("."),k=0,ot=it.length;k<ot;k++)h=it[k],t&&t(l?l+"."+h:h)||(a=i[l],a||(a=i[l]={}),a[h]||(a[h]=h))}else s.type==3&&s.styleSheet&&(o[o.length]=s.styleSheet);this.processStyleSheets(o,t,i,r)}return i};Tridion.Utils.Css.addDomClasses(document);


Tridion.Type.registerNamespace("Tridion");Tridion.ObjectWithControls=function(){Tridion.OO.enableInterface(this,"Tridion.ObjectWithControls");this.addInterface("Tridion.DisposableObject");this.properties.controls={}};Tridion.ObjectWithControls.prototype.disposeInterface=Tridion.OO.nonInheritable(function(){var i=this.properties,r=i.controls,t,n;for(t in r)n=r[t],Tridion.Type.isNullOrUndefined(n)||(Tridion.EventRegister.removeAllEventHandlers(n),Tridion.OO.implementsInterface(n,"Tridion.ControlBase")?Tridion.ControlRegistry.disposeControl(n):Tridion.Web.UI.Core.Utils.Console.debugWarn(Tridion.Utils.String.format('"{0}" has property on "this.properties.controls" with key "{1}" which is not a control.',this.getTypeName(),t)));delete i.controls});

Tridion.Type.registerNamespace("Tridion.Controls");Tridion.Controls.ClassNames={TRIDION:"tridion",DISABLED:"disabled",SELECTED:"selected",HIDDEN:"hidden",READONLY:"readonly",FIXED:"fixed",LOADING:"loading",FOCUSED:"focused",VERTICAL:"vertical",HORIZONTAL:"horizontal"};Tridion.ControlBase=function(n){var t,i,r;Tridion.Utils.Assert.isHtmlElement(n);Tridion.OO.enableInterface(this,"Tridion.ControlBase");this.addInterface("Tridion.ObjectWithControls");this.addInterface("Tridion.ObjectWithEvents");t=this.properties;t.element=n;t.id=n.id;t.disabled=n.classList.contains(Tridion.Controls.ClassNames.DISABLED);Tridion.Core.Configuration.DebugMode&&(i=this.getTypeName(),r=n.getAttribute("data-sdlweb-control"),r?n.setAttribute("data-sdlweb-control",r+";"+i):n.setAttribute("data-sdlweb-control",i))};Tridion.ControlBase.prototype.initialize=function(){};Tridion.ControlBase.prototype.getSetting=function(n,t){return n&&t in n?n[t]:this.properties.element.getAttribute("c:"+t)};Tridion.ControlBase.prototype.getNumberSetting=function(n,t,i){var r=this.getSetting(n,t,i);return Tridion.Type.isNumeric(r)?Number(r):i};Tridion.ControlBase.prototype.getBooleanSetting=function(n,t,i){var r=this.getSetting(n,t,i);return r||r==!1?String(r)=="true":i};Tridion.ControlBase.prototype.enable=function(){var n=this.properties;n.disabled=!1;Tridion.Utils.Css.removeClass(n.element,Tridion.Controls.ClassNames.DISABLED)};Tridion.ControlBase.prototype.disable=function(){var n=this.properties;n.disabled=!0;n.element.classList.add(Tridion.Controls.ClassNames.DISABLED)};Tridion.ControlBase.prototype.isDisabled=function(){return this.properties.disabled};Tridion.ControlBase.prototype.setDisabled=function(n){n?this.disable():this.enable()};Tridion.ControlBase.prototype.disposeInterface=Tridion.OO.nonInheritable(function(){Tridion.EventRegister.removeAllEventHandlers(this.properties.element)});Tridion.ControlBase.prototype.getElement=function(){return this.properties.element};Tridion.ControlBase.prototype.getId=function(){return this.properties.id};Tridion.ControlBase.prototype.setId=function(n){this.properties.id=n;this.properties.element&&(this.properties.element.id=n)};Tridion.ControlBase.prototype.focus=function(){if(this.properties.element)try{this.properties.element.focus()}catch(n){}};

Tridion.Type.registerNamespace("Tridion.Web.UI.Editors.XPMCore.Controls");Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay=function(n,t){var i,r;Tridion.OO.enableInterface(this,"Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay");this.addInterface("Tridion.DisposableObject");this.addInterface("Tridion.Web.UI.Editors.XPMCore.Controls.JsStyledControl");i=this.properties;i.element=n;i.id=n.id;i.labelElement;i.isShown=!1;r=t||{};i.targetElement=r.targetElement;i.imageUrl=r.imageUrl||"";i.text=r.text||"";i.isFullScreen=!Tridion.Type.isHtmlElement(i.targetElement);i.stylesObject=Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.Styles};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.IsQuirksMode=Tridion.Utils.Dom.isIE&&document.compatMode=="BackCompat";Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.HtmlTemplate='<div data-class="loelem-container"><div data-class="loelem-inner">{0}<div class="loadingOverlayLabel">{2}<\/div><\/div><\/div>';Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.createElement=function(n,t){var u,f;t||(t=document);var r=n?n.imageUrl:null,e=r?Tridion.Utils.String.format('<img src="{0}" style="width:12px;height:12px" border="0" alt="" />',r):"",i=t.createElement("div");return i.id=Tridion.Utils.String.format("{0}_lo",Tridion.Utils.Dom.generateUniqueID()),i.style.visibility="hidden",u=n?n.text:"",i.innerHTML=Tridion.Utils.String.format(this.HtmlTemplate,e,i.id,u||""),this.IsQuirksMode&&(f=Tridion.Utils.Dom.getFirstElementChild(i),f.style.top="50%"),t.body.appendChild(i),i};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.prototype.initialize=function(){this.properties.labelElement=Tridion.$(".loadingOverlayLabel",this.getElement());this._applyStyles()};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.prototype.disposeInterface=Tridion.OO.nonInheritable(function(){var n=this.properties;n.targetElement=null;n.isShown&&n.isFullScreen&&Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.IsQuirksMode&&Tridion.EventRegister.removeEventHandler(window,"scroll",this.getDelegate(this._updatePosition))});Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.prototype.getElement=function(){return this.properties.element};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.prototype.getTargetElement=function(){return this.properties.targetElement};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.prototype.getId=function(){return this.properties.id};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.prototype.show=function(){var n=this.properties;n.isShown||(Tridion.Utils.Css.show(this.getElement()),n.isShown=!0,n.isFullScreen&&Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.IsQuirksMode&&Tridion.EventRegister.addEventHandler(window,"scroll",this.getDelegate(this._updatePosition)))};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.prototype.isShown=function(){return this.properties.isShown};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.prototype.hide=function(){var n=this.properties;n.isShown&&(Tridion.Utils.Css.hide(this.getElement()),n.isShown=!1,n.isFullScreen&&Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.IsQuirksMode&&Tridion.EventRegister.removeEventHandler(window,"scroll",this.getDelegate(this._updatePosition)))};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.prototype.setText=function(n){var t=this.properties;t.text=n||"";Tridion.Utils.Dom.setInnerText(t.labelElement,t.text)};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.prototype.setTargetElement=function(n){var t=this.properties;t.isFullScreen=!Tridion.Type.isHtmlElement(n);t.targetElement=n;this._applyStyles()};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.prototype._applyStyles=function(){var i=this.properties,r=i.targetElement,n,t;r&&(n=this.getElement(),i.isFullScreen?n.setAttribute("data-class","lowindow-outer"):(n.setAttribute("data-class","loelem-outer"),t=Tridion.Utils.Dom.getElementBoxPosition(r,n.ownerDocument),Tridion.Utils.Css.pixelCoord(n,t.x,t.y),Tridion.Utils.Css.pixelWidth(n,t.w),Tridion.Utils.Css.pixelHeight(n,t.h)),this.callBase("Tridion.Web.UI.Editors.XPMCore.Controls.JsStyledControl","_applyStyles"))};Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.prototype._updatePosition=function(){var n=this.getElement(),t=n.ownerDocument;n.style.top=t.body.scrollTop+"px"};
Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.Styles={"lowindow-outer":{element:Tridion.Utils.String.format("height: 100%; width: 100%; position: {0}; display: table; left: 0; top: 0; padding: 0; margin: 0; background-color: #405666; opacity: 0.6; filter: alpha(opacity=60); vertical-align: middle; z-index: 2147483637;",Tridion.Utils.Dom.isIE&&document.compatMode=="BackCompat"?"absolute":"fixed"),'element div[data-class="loelem-container"]':"height: auto; position: relative; display: table-cell; text-align: center; vertical-align: middle;",'element div[data-class="loelem-inner"]':"width: auto; height: auto; text-align: center; margin-left: auto; margin-right: auto; color: #ffffff; font-weight: normal; font-family: Verdana; font-size: 12px;",'element div[data-class="loelem-inner"] > div':"margin-top: 5px"},"loelem-outer":{element:"position: absolute; display: table; padding: 0; margin: 0; background-color: #405666; opacity: 0.6; filter: alpha(opacity=60); vertical-align: middle; z-index: 2147483637;",'element div[data-class="loelem-container"]':"height: auto; position: relative; display: table-cell; text-align: center; vertical-align: middle;",'element div[data-class="loelem-inner"]':"width: auto; height: auto; text-align: center; margin-left: auto; margin-right: auto; color: #ffffff; font-weight: normal; font-family: Verdana; font-size: 12px;",'element div[data-class="loelem-inner"] > div':"margin-top: 5px"}};
Tridion.Web.UI.Core.Utils.Deprecation.deprecateTridionInterface("Tridion.Controls.LoadingOverlay","8","Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay");
Tridion.Web.UI.Core.Utils.Compatibility.createCompatibilityObject("Tridion.Controls.LoadingOverlay.Styles","8","Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay.Styles");
Tridion.Type.registerNamespace("Tridion.Web.UI.Editors.XPMCore.Utils.Content");Tridion.Web.UI.Editors.XPMCore.Utils.Content.callEditorWindowMethod=function(n,t,i){Tridion.Utils.CrossDomainMessaging.call(window.parent,n,t,i)};
(function(){function tt(n){if(!i&&(i=!0,u&&(u(),l()),n)){Tridion.Runtime=n.Runtime;var t=n.url;y(t+"?mode=js",g);k(t+"?mode=css")}}var i=!1,c=document.getElementsByTagName("head")[0],n,t,f,r,u,l,e,o,a=!1,v=!1,b=function(){for(var r,t,f,u=document.getElementsByTagName("script"),n,i=0,e=u.length;i<e;i++)if(r=u[i],t=r.src,t&&(f=t.match(/^(.*\/siteedit\/)views\/bootstrap\/bootstrap.aspx\?mode=js$/i))){n=f[1];break}else if(r.id=="tridion.siteedit"){n=Tridion.Utils.Url.getDomain(t)+"{SeEditorUrl}";break}n||(n=Tridion.Utils.Url.getDomain(location.href)+"{SeEditorUrl}");Tridion.Constants.WebUiDomain=Tridion.Utils.Url.getDomain(n);Tridion.Constants.SiteEditEditorUrl=Tridion.Constants.WebUiDomain+"/SDL/";Tridion.Constants.SiteEditBootstrapRootUrl=n+"Views/Bootstrap/";Tridion.Constants.SiteEditLoadingGif=n+"Views/Bootstrap/Loading.gif"},y=function(n,t){var i=document.createElement("script");if(i.setAttribute("type","text/javascript"),t){function r(){t&&(t(),t=null)}Tridion.EventRegister.addEventHandler(i,"readystatechange",function(n){(i.readyState=="loaded"||i.readyState=="complete")&&r()});Tridion.EventRegister.addEventHandler(i,"load",r)}i.src=n;c.appendChild(i)},k=function(n){var t=document.createElement("link");t.setAttribute("rel","stylesheet");t.setAttribute("type","text/css");t.setAttribute("href",n);c.appendChild(t)},p=function(){a&&v&&Tridion.Web.UI.Editors.XPMCore.Controls.Page.initialize()},d=function(){var n;t&&(n=nt("Tridion.Web.UI.Editors.SiteEdit.Strings","Loading"),n&&t.setText(n));v=!0;p()},g=function(){a=!0;p()},nt=function(n,t){var i=Tridion.LocalizedStrings[n];if(i)return i[t]},s,w,h;b();s=window.parent;s&&s!=window&&(Tridion.Utils.CrossDomainMessaging.addTrustedDomain("*"),w=function(n){Tridion.Web.UI.Editors.XPMCore.Utils.Content.callEditorWindowMethod("Tridion.Web.UI.Editors.XPMCore.Utils.CrossDomainMessaging.pageUnloaded")},Tridion.EventRegister.addEventHandler(window,"unload",w),h=function(){i||(Tridion.Web.UI.Editors.XPMCore.Utils.Content.callEditorWindowMethod("Tridion.Web.UI.Editors.XPMCore.Utils.CrossDomainMessaging.pageLoaded",[location.href],tt),setTimeout(h,50))},h());y(Tridion.Constants.SiteEditBootstrapRootUrl+"stringresources.js",d);i||(n=Tridion.ControlRegistry.createControl("Tridion.Web.UI.Editors.XPMCore.Controls.Button",{id:"SEStartButton"},document),n&&(setTimeout(function(){n&&n.addStyle("SEStartButton")},0),u=function(){n&&(Tridion.ControlRegistry.disposeControl(n),f&&Tridion.Utils.Dom.removeNode(f),f=n=null)},l=function(){t&&(t.dispose(),r&&Tridion.Utils.Dom.removeNode(r),r=t=null)},e=function(){if(o&&window.clearTimeout(o),n&&document.body){document.body.appendChild(f=n.getElement());Tridion.EventRegister.addEventHandler(n,"click",function(){u();t&&t.show();top.location=Tridion.Constants.SiteEditEditorUrl+"#app=wcm&entry=editing-site&url="+encodeURIComponent("#url="+window.location)});var i={text:"Loading...",targetElement:window,imageUrl:Tridion.Constants.SiteEditLoadingGif},s=Tridion.Web.UI.Editors.XPMCore.Controls.LoadingOverlay;r=s.createElement(i);t=new s(r,i);t.initialize()}else o=window.setTimeout(e,0)},i?u():e()))})();
Tridion.Web.UI.Editors.XPMCore.Controls.Button.Styles["button SEStartButton"]={element:Tridion.Utils.String.format("background-image: url({0}Images/Icons/edit.mono-bright.16x16{1}.png); background-color: #296ACC; background-repeat: no-repeat; background-position: center; height: 25px; width: 28px; border: solid 1px #0D3274; border-radius: 3px; box-shadow: inset 0 1px 0 0 #5b8ee1,inset 0 -1px 0 0 #1e56ac; z-index:9999; position:fixed; right: 10px; top: 10px; cursor:pointer;",Tridion.Constants.WebUiDomain+Tridion.Core.Configuration.expandThemePath(null,"Base"))};Tridion.Web.UI.Editors.XPMCore.Controls.Button.Styles["button SEStartButton mousedown"]={element:"background-color: #1958B9;"};Tridion.Web.UI.Editors.XPMCore.Controls.Button.Styles["button SEStartButton mouseover"]={element:"background-color: #3880F0;"};Tridion.Web.UI.Editors.XPMCore.Controls.Button.Styles["button SEStartButton disabled"]={element:"background-color: #F4F4F4; border: solid 1px #AAA;"};
